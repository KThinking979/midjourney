"use strict";(self.webpackChunkemojifi=self.webpackChunkemojifi||[]).push([[916],{712:(e,t,i)=>{i.d(t,{kg:()=>s,Y_:()=>c,wz:()=>p,FH:()=>m,bF:()=>l,TK:()=>d});var a=i(6220);const n=(0,i(815).Wp)({apiKey:"AIzaSyBOTVOdSu20rXHX_VWHnV3XmS9ZcnfQuBQ",authDomain:"midjourneyai-71161.firebaseapp.com",projectId:"midjourneyai-71161",storageBucket:"midjourneyai-71161.appspot.com",messagingSenderId:"559017193613",appId:"1:559017193613:web:8f4159f592c0a63e4e32c4",measurementId:"G-FEN6H6F61Y"}),r=(0,a.aU)(n);var o=i(4456);const c=async()=>{try{let e;const t=(0,a.H9)(r,"configs","configs"),i=await(0,a.x7)(t);return i.exists()&&(e=i.data()),e}catch(e){console.error("Error getUser: ",e)}},s=async e=>{let{id:t,username:i,coins:n}=e;try{const e=(new Date).toISOString().slice(0,10).replace("-","").replace("-","");await(0,a.BN)((0,a.H9)(r,"users","".concat(t)),{id:"".concat(t),username:i,coins:n,numAds:1,expDateAds:e,language:"en",createdAt:new Date,updateAt:new Date})}catch(o){console.error("Error createUser: ",o)}},l=async e=>{let{id:t,coins:i,transactionId:n}=e;try{await(0,a.mZ)((0,a.H9)(r,"users","".concat(t)),{coins:i,updateAtTrans:"COIN_".concat(new Date),transactionId:"".concat(n)})}catch(o){console.error("Error updateCoinsUser: ",o)}},d=async e=>{let{id:t,coins:i,language:n,numAds:o,expDateAds:c}=e;try{let e={};n&&(e={...e,language:n}),null!==i&&void 0!==i&&(e={...e,coins:i}),null!==o&&void 0!==o&&(e={...e,numAds:o}),null!==c&&void 0!==c&&(e={...e,expDateAds:c}),await(0,a.mZ)((0,a.H9)(r,"users","".concat(t)),{...e,updateAt:new Date})}catch(s){console.error("Error updateCoinsUser: ",s)}},p=async e=>{try{let t;const i=(0,a.H9)(r,"users","".concat(e)),n=await(0,a.x7)(i);return n.exists()&&(t=n.data()),t}catch(t){console.error("Error getUser: ",t)}},m=async e=>{let{model:t,server:i,text:a,cursor:n}=e;try{"".concat(window.location.protocol,"//").concat(i);const e=new Headers;e.append("Content-Type","application/json"),e.append("Accept","application/json, text/plain, */*"),e.append("Accept-Language","en-US,en;q=0.9"),e.append("Referer","https://lexica.art/");return o.Ze}catch(r){return console.log("Kai Error ",r),{error:!0}}}},1940:(e,t,i)=>{i.d(t,{M:()=>n,n:()=>r});var a=i(4451);const n=(0,a.j)((()=>i.e(465).then(i.bind(i,465))),(e=>e.ImageFast)),r=(0,a.j)((()=>i.e(919).then(i.bind(i,8919))),(e=>e.ImageSkeleton))},4916:(e,t,i)=>{i.r(t),i.d(t,{DashBoardPage:()=>b});var a=i(9950),n=i(6455),r=i(3247),o=i(1389),c=i(2481),s=i(393),l=i(3731),d=i(4418),p=i(327),m=i(1912),u=i(2423),h=i(6365),g=i(2935),x=i(7738),w=i(917),A=i(5236),S=i(712),I=i(7385),E=i(6256),f=i(1940),j=i(4456),y=i(3564),_=i(8412),T=i(4414);let C=window.innerWidth>500?500:window.innerWidth;window.innerHeight;const v=[{id:"0",mode:j.g.TEXT_ARTISTIC,path:_.W.TEXT_ARTISTIC,title:"Text Artistic",icon:p.P9_,emoji:""},{id:"1",mode:j.g.IMAGE_ARTISTIC,path:_.W.IMAGE_ARTISTIC,title:"Image Artistic",icon:m.hjn,emoji:""},{id:"2",mode:j.g.SD3_SUPPER,path:_.W.SD3_SUPPER,title:"SD3 Supper",icon:u.$iZ,emoji:""},{id:"3",mode:j.g.FACE_STICKER,path:_.W.FACE_STICKER,title:"Face Sticker",icon:g.jg2,emoji:""},{id:"4",mode:j.g.FACE_SWAP,path:_.W.FACE_SWAP,title:"FaceSwap",icon:h.yOh,emoji:""},{id:"5",mode:j.g.BACKGROUND,path:_.W.BACKGROUND,title:"Background",icon:x.HY1,emoji:""},{id:"6",mode:j.g.TEXT_ANIME,path:_.W.TEXT_ANIME,title:"Text Anime",icon:w.ZQS,emoji:""},{id:"7",mode:j.g.IMAGE_ANIME,path:_.W.IMAGE_ANIME,title:"Image Anime",icon:x.a6J,emoji:""},{id:"8",mode:j.g.VIDEO_ANIME,path:_.W.VIDEO_ANIME,title:"Video Anime",icon:p.Am_,emoji:""}],b=()=>{const e=(0,y.Zp)(),{user:t,configs:i}=(0,a.useContext)(A.rf),{setUser:p,setConfigs:m}=(0,a.useContext)(A.D8),[u,h]=(0,a.useState)(!0),[g,x]=(0,a.useState)(!1),[w,j]=(0,a.useState)(!0),[b,D]=(0,a.useState)(0),[W,H]=(0,a.useState)([]),F=async e=>{let{isFirst:t,_textKey:a,_cursor:n}=e;if(!g&&n<=i.limitSearch){x(!0);let e=await(0,S.FH)({server:i&&i.lexicaSearch?i.lexicaSearch:"https://lexica.art/api/infinite-prompts",model:i&&i.modelLexica?i.modelLexica:"lexica-aperture-v2",text:a,cursor:n});if(e&&e.prompts&&0===e.prompts.length&&(e=await(0,S.FH)({server:i&&i.lexicaSearch?i.lexicaSearch:"https://lexica.art/api/infinite-prompts",model:i&&i.modelLexica?i.modelLexica:"lexica-aperture-v2",text:a,cursor:n})),e&&e.prompts&&0===e.prompts.length&&(e=await(0,S.FH)({server:i&&i.lexicaSearch?i.lexicaSearch:"https://lexica.art/api/infinite-prompts",model:i&&i.modelLexica?i.modelLexica:"lexica-aperture-v2",text:a,cursor:n})),e&&e.prompts&&0===e.prompts.length&&(e=await(0,S.FH)({server:i&&i.lexicaSearch?i.lexicaSearch:"https://lexica.art/api/infinite-prompts",model:i&&i.modelLexica?i.modelLexica:"lexica-aperture-v2",text:a,cursor:n})),e&&e.prompts&&e.prompts.length){const{prompts:t}=e,a=[];for(let e=0;e<t.length;e++){const n=t[e];a.push({id:n.id,textKey:n.prompt,negativeKey:n.negativePrompt?n.negativePrompt:"",uri:n.images.length?"".concat(i.lexicaImageSm2,"/").concat(n.images[0].id):"",width:n.width,height:n.height,isLast:e===t.length-1?W.length+t.length:0})}H([...W,...a]),D(n+50),n+50===i.limitSearch&&j(!1)}else H([]);!u&&await(0,I.y)(1e3),x(!1)}};(0,a.useEffect)((()=>{(async()=>{await F({isFirst:!1,_textKey:"",_cursor:0})})(),(async()=>{var e;const a=await(0,S.Y_)();m(a);const n=null===(e=window.Telegram)||void 0===e?void 0:e.WebApp;if(n&&!t){n.ready();const e=n.initDataUnsafe.user;if(e){let t={id:e.id,username:"".concat(e.last_name," ").concat(e.first_name),coins:i.initCoin?i.initCoin:0};const a=await(0,S.wz)(t.id);a?t={...a,username:"".concat(e.last_name," ").concat(e.first_name)}:await(0,S.kg)(t),p(t)}}if(a.isTest){let e={id:"0",username:"Kai Test",coins:100};const t=await(0,S.wz)(e.id);t?e={...t}:await(0,S.kg)(e),p(e)}})()}),[]);const k=(0,a.useCallback)((async()=>{const{scrollTop:e,scrollHeight:t,clientHeight:i}=document.documentElement;e+i>=t-.5&&await F({isFirst:!1,_textKey:"",_cursor:0})}),[W]);(0,a.useEffect)((()=>(window.addEventListener("scroll",k),()=>window.removeEventListener("scroll",k))),[k]);const K=(0,a.useCallback)((async t=>{e(t.path)}),[]);return(0,T.jsxs)(r.az,{children:[(0,T.jsxs)(n.mg,{children:[(0,T.jsx)("title",{children:"Dashboard"}),(0,T.jsx)("meta",{name:"description",content:"Midjourney AI"})]}),(0,T.jsxs)(o.B,{h:"100vh",w:C,py:20,px:2,spacing:10,children:[(0,T.jsx)(o.B,{borderRadius:8,py:2,spacing:2,children:(0,T.jsx)(c.x,{templateColumns:"repeat(3, 1fr)",gap:5,children:v.map((e=>(0,T.jsxs)(o.B,{flex:1,alignItems:"center",justifyContent:"center",borderColor:"#818cf8",borderWidth:2,borderRadius:8,bg:"transparent",minW:20,minH:20,spacing:2,_active:{bg:"blue.500"},onClick:()=>K(e),children:[(0,T.jsx)(s.I,{color:"white",as:e.icon,boxSize:8}),(0,T.jsx)(l.E,{textAlign:"center",color:"white",fontSize:14,children:e.title})]},e.id)))})}),(0,T.jsxs)(o.B,{padding:0,py:4,pb:40,onScroll:k,children:[(0,T.jsx)(d.z,{spacing:2,children:(0,T.jsx)(l.E,{color:"white",fontSize:16,fontWeight:"700",children:"\ud83c\udfa8 Artistic Key"})}),(0,T.jsx)(E.A,{columnsCount:2,gutter:"16px",children:W.map(((t,i)=>{const{id:a,uri:n}=t;return(0,T.jsx)(f.M,{uri:n,onPress:()=>{e(_.W.TEXT_ARTISTIC)}},i)}))})]})]})]})}},7385:(e,t,i)=>{i.d(t,{y:()=>a});const a=e=>new Promise((t=>setTimeout(t,e)))}}]);