"use strict";(self.webpackChunkemojifi=self.webpackChunkemojifi||[]).push([[608],{608:(e,t,n)=>{n.r(t),n.d(t,{PickerImage:()=>b});var o=n(9950),a=n(1389),i=n(4418),r=n(1317),s=n(393),c=n(6086),l=n(6569),h=n(1374),d=n(2935),w=n(8656),g=n(7385),m=n(327),u=n(4414);const b=e=>{let{title:t,placeholder:n,value:b,aspectRatio:p,onChange:f}=e;const[j,x]=(0,o.useState)(),[v,y]=(0,o.useState)();(0,o.useEffect)((()=>{let e=512,t=512;p&&(e=p._w,t=p._h),j&&p&&R({file:j.file,base64:j.base64,width:e,height:t})}),[p,j]);const R=async e=>{let{file:t,base64:n,width:o=512,height:a=512}=e;const i=await(0,g.nJ)({imageSrc:n,rate:o/a,iw:t.width,ih:t.height});y(i),f&&f(i)};return(0,u.jsxs)(a.B,{children:[(0,u.jsxs)(i.z,{justifyContent:"space-between",children:[(0,u.jsx)(r.E,{color:"white",fontSize:16,fontWeight:"700",children:t}),v&&(0,u.jsx)(s.I,{as:m.b6i,boxSize:6,color:"red.400",onClick:()=>{y(null),f&&f(null)}})]}),(0,u.jsx)(w.Ay,{onDrop:async e=>{let t=e[0];t=await new Promise(((e,n)=>{const o=new Image;let a;o.onload=function(){t.width=o.width,t.height=o.height,e(t)},a=URL.createObjectURL(t),o.src=a}));const n=await(0,g.Sk)(t),o={file:t,base64:n};x(o),p||(y(o),f&&f(o))},accept:{"image/jpeg":[],"image/png":[]},multiple:!1,children:e=>{let{getRootProps:t,getInputProps:o}=e;return(0,u.jsx)("div",{...t({className:"dropzone",onDrop:e=>e.stopPropagation()}),children:(0,u.jsxs)(c.o,{borderRadius:8,borderColor:"white",borderWidth:1,minH:40,children:[(0,u.jsx)("input",{...o()}),v&&(0,u.jsx)(c.o,{children:(0,u.jsx)(l._,{w:40,h:40,objectFit:"contain",m:2,src:"".concat(v.base64),alt:"art"})}),!v&&(0,u.jsx)(h.$,{size:"sm",colorScheme:"white",variant:"ghost",borderRadius:"full",_hover:{backgroundColor:"back"},leftIcon:(0,u.jsx)(d.vzv,{color:"white",size:20}),children:(0,u.jsx)(r.E,{fontSize:16,color:"gray.700",fontWeight:"400",children:n})})]})})}})]})}},7385:(e,t,n)=>{n.d(t,{RZ:()=>a,Sk:()=>i,hs:()=>r,nJ:()=>s,yy:()=>o});const o=e=>new Promise((t=>setTimeout(t,e))),a=e=>{let{min:t,max:n}=e;return Math.floor(Math.random()*(n-t+1))+t},i=e=>new Promise(((t,n)=>{const o=new FileReader;o.onloadend=()=>t(o.result),o.readAsDataURL(e)})),r=async e=>{const t=await fetch(e),n=await t.blob();return new Promise(((e,t)=>{const o=new FileReader;o.readAsDataURL(n),o.onloadend=()=>{const t=o.result;e(t)},o.onerror=t}))},s=async e=>{let{imageSrc:t,rate:n,iw:o,ih:a}=e,i=0,r=0,s=0,l=0;a>o||a===o&&n>1?(i=0,r=a/2-o/(2*n),s=o,l=o/n,r<0&&(i=o/2-a*n/2,r=0,s=a*n,l=a)):(i=o/2-a*n/2,r=0,s=a*n,l=a,i<0&&(i=0,r=a/2-o/(2*n),s=o,l=o/n));const h=await(d=t,new Promise(((e,t)=>{const n=new Image;n.addEventListener("load",(()=>e(n))),n.addEventListener("error",(e=>t(e))),n.setAttribute("crossOrigin","anonymous"),n.src=d})));var d;const w=document.createElement("canvas"),g=w.getContext("2d");w.width=s,w.height=l,g.drawImage(h,i,r,s,l,0,0,s,l);const m=w.toDataURL("image/jpeg",1);return{file:c(m,"img.png"),base64:m}},c=(e,t)=>{for(var n=e.split(","),o=n[0].match(/:(.*?);/)[1],a=atob(n[1]),i=a.length,r=new Uint8Array(i);i--;)r[i]=a.charCodeAt(i);return new File([r],t,{type:o})}}}]);