"use strict";(self.webpackChunkemojifi=self.webpackChunkemojifi||[]).push([[895],{1940:(e,t,s)=>{s.d(t,{Kc:()=>c,MF:()=>n,nn:()=>a});var i=s(4451);const n=(0,i.j)((()=>s.e(465).then(s.bind(s,465))),(e=>e.ImageFast)),a=(0,i.j)((()=>s.e(606).then(s.bind(s,9606))),(e=>e.ImageSkeleton)),c=(0,i.j)((()=>s.e(613).then(s.bind(s,2613))),(e=>e.ImageSkeletonShow))},3246:(e,t,s)=>{s.d(t,{a:()=>i});const i=(0,s(4451).j)((()=>Promise.all([s.e(545),s.e(825)]).then(s.bind(s,825))),(e=>e.ModalLoading))},6895:(e,t,s)=>{s.r(t),s.d(t,{GenArtisticPage:()=>v});var i=s(9950),n=s(6455),a=s(2099),c=s(3247),o=s(1389),r=s(2481),l=s(4418),h=s(1374),d=s(393),u=s(1317),p=s(5236),w=s(3564),x=s(3246),g=s(712),j=s(4456),m=s(7385),f=s(7956),y=s(1940),S=s(9591),C=s(5495),b=s(4414);let k=window.innerWidth>500?500:window.innerWidth,A=!1;const v=()=>{const e=(0,w.Zp)(),t=(0,a.d)(),s=(0,w.zy)(),{user:v,configs:K,listAIStyleAll:I}=(0,i.useContext)(p.rf),{setUser:F}=(0,i.useContext)(p.D8),[P,W]=(0,i.useState)(!1),[_,z]=(0,i.useState)(!1),[D,B]=(0,i.useState)(!1),[E,R]=(0,i.useState)(!1),[G,T]=(0,i.useState)(!1),[M,U]=(0,i.useState)(),[O,V]=(0,i.useState)(""),[Z,L]=(0,i.useState)(""),[N,$]=(0,i.useState)(""),[H,Y]=(0,i.useState)(""),[q,J]=(0,i.useState)("");(0,i.useEffect)((()=>{window.scrollTo(0,0),Q()}),[]);const Q=async()=>{A=!1;let t,i=0;try{const n=s.state;if(v&&n&&n.dataAI){const e=n.dataAI,s=v;W(!0),B(!1),U(e);const a=e.style?e.style.key:"";let c="".concat(a.replace("{prompt}",e.prompt));const o=e.style?e.style.negativeKey:"",r="".concat(e.negativeKey," ").concat(o);if((e.isFree||!e.isFree&&parseFloat(s.coins)>=parseFloat(e.feeCoin))&&e.type===j.Wk.GEN)for(let n=0;n<e.samples&&!A;n++){let s=e.seed;if(-1===e.seed&&(s=(0,m.RZ)({min:0,max:j.Vm})),e.type===j.Wk.GEN&&"ProGen"===e.model){K.token,K.server;t={data:j.EW,isSuccess:!0},await(0,m.yy)(3e3)}if(t&&!t.error){if(0===n&&V(t.data),4===e.samples)switch(n){case 0:L(t.data);break;case 1:$(t.data);break;case 2:Y(t.data);break;case 3:J(t.data)}t.isSuccess&&(i+=parseFloat(e.feeCoin)/e.samples)}}if(W(!1),e.isFree){const t=(new Date).toUTCString(),s="".concat(v.dateAds,"_").concat(e.mode,"_ADS_V1_").concat(t);(0,g.TK)({id:v.id,updatedAt:s})}else{const e=parseFloat(s.coins)-i,t=(new Date).toUTCString(),n="".concat(s.coins,"-").concat(i,"=").concat(e,"_Gen_V1_IOS_").concat(t);null===e&&void 0===e||(await(0,g.TK)({id:v.id,coins:e<0?0:e,updatedAt:n}),F({...v,coins:e<0?0:e}))}B(!0)}else e(-1)}catch(n){console.log("Error ",n),W(!1)}},X=(0,i.useCallback)((async()=>{}),[]),ee=(0,i.useCallback)((async()=>{if(!v)return;console.log("Start"),W(!0);const e=(0,f.A)(),s=await(0,g.jH)({data:O,folder:"Albums",name:e}),i={id:e,type:M.type,isImage:!0,prompt:M.prompt,negative:M.negative,style:M.style,width:M.width,height:M.height,steps:M.steps,scale:M.scale,uri:s,createAt:new Date};await(0,g.Y4)({id:v.id,data:i}),t({title:"Saved",status:"success",position:"top",isClosable:!0}),W(!1),console.log("Done")}),[M,O]),te=k;return(0,b.jsxs)(c.az,{children:[(0,b.jsxs)(n.mg,{children:[(0,b.jsx)("title",{children:"Gen Artistic"}),(0,b.jsx)("meta",{name:"description",content:"Midjourney AI"})]}),(0,b.jsxs)(o.B,{h:"100vh",w:k,pt:20,px:2,justifyContent:"space-between",children:[M&&1===M.samples&&(0,b.jsx)(o.B,{flex:1,justifyContent:"center",children:(0,b.jsx)(y.Kc,{uri:O,width:k,height:k/(M.width/M.height)},O)}),M&&4===M.samples&&!D&&(0,b.jsx)(o.B,{flex:1,justifyContent:"center",children:(0,b.jsxs)(r.x,{templateColumns:"repeat(2, 1fr)",gap:6,children:[(0,b.jsx)(y.Kc,{uri:Z,width:te/2,height:te/(M.width/M.height)/2},1),(0,b.jsx)(y.Kc,{uri:N,width:te/2,height:te/(M.width/M.height)/2},2),(0,b.jsx)(y.Kc,{uri:H,width:te/2,height:te/(M.width/M.height)/2},3),(0,b.jsx)(y.Kc,{uri:q,width:te/2,height:te/(M.width/M.height)/2},4)]})}),M&&4===M.samples&&D&&(0,b.jsx)(o.B,{flex:1,justifyContent:"center",children:(0,b.jsxs)(l.z,{spacing:1,children:[(0,b.jsx)(o.B,{w:"10%",children:(0,b.jsxs)(r.x,{templateColumns:"repeat(1, 1fr)",gap:6,children:[(0,b.jsx)(y.Kc,{isActive:O===Z,uri:Z,width:.2*te/2,height:.2*te/(M.width/M.height)/2,onPress:()=>{V(Z)}},1),(0,b.jsx)(y.Kc,{isActive:O===N,uri:N,width:.2*te/2,height:.2*te/(M.width/M.height)/2,onPress:()=>{V(N)}},2),(0,b.jsx)(y.Kc,{isActive:O===H,uri:H,width:.2*te/2,height:.2*te/(M.width/M.height)/2,onPress:()=>{V(H)}},3),(0,b.jsx)(y.Kc,{isActive:O===q,uri:q,width:.2*te/2,height:.2*te/(M.width/M.height)/2,onPress:()=>{V(q)}},4)]})}),(0,b.jsx)(o.B,{w:"90%",children:(0,b.jsx)(y.Kc,{uri:O,width:.8*te,height:.8*te/(M.width/M.height)},O)})]})}),(0,b.jsx)(o.B,{spacing:4,justifyContent:"center",w:"full",backgroundColor:"black",maxW:"500px",children:(0,b.jsxs)(l.z,{spacing:2,children:[(0,b.jsx)(h.$,{py:4,my:4,colorScheme:"purple",borderRadius:"full",onClick:X,leftIcon:(0,b.jsx)(d.I,{as:S.aO_}),flex:1,children:(0,b.jsx)(l.z,{children:(0,b.jsx)(u.E,{color:"white",fontSize:16,fontWeight:"700",children:"Re-Create"})})}),(0,b.jsx)(h.$,{flex:1,py:4,mx:2,my:4,colorScheme:"blue",borderRadius:"full",onClick:ee,leftIcon:(0,b.jsx)(d.I,{as:C.gWm}),isDisabled:""===O,children:(0,b.jsx)(l.z,{children:(0,b.jsx)(u.E,{color:"white",fontSize:16,fontWeight:"700",children:"Save"})})})]})})]}),(0,b.jsx)(x.a,{isOpen:P})]})}},7385:(e,t,s)=>{s.d(t,{RZ:()=>n,Sk:()=>a,yy:()=>i});const i=e=>new Promise((t=>setTimeout(t,e))),n=e=>{let{min:t,max:s}=e;return Math.floor(Math.random()*(s-t+1))+t},a=e=>new Promise(((t,s)=>{const i=new FileReader;i.onloadend=()=>t(i.result),i.readAsDataURL(e)}))}}]);