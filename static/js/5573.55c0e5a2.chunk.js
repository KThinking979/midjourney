"use strict";(self.webpackChunkemojifi=self.webpackChunkemojifi||[]).push([[5573],{5573:(e,t,n)=>{n.r(t),n.d(t,{PickFace:()=>d});var r=n(9950),o=n(6086),a=n(6569),i=n(1374),s=n(2935),c=n(6275),l=n(7385),h=n(4414);const d=e=>{let{isActive:t,onChange:n}=e;const[d,g]=(0,r.useState)();return(0,r.useEffect)((()=>{!t&&g(null)}),[t]),(0,h.jsx)(o.o,{children:(0,h.jsx)(c.Ay,{onDrop:async e=>{let t=e[0];t=await new Promise(((e,n)=>{const r=new Image;let o;r.onload=function(){t.width=r.width,t.height=r.height,e(t)},o=URL.createObjectURL(t),r.src=o}));const r=await(0,l.Sk)(t),o={title:"Custom",width:t.width,height:t.height,_width:t.width,_height:t.height,file:t,base64:r};g(o),o&&n(o)},accept:{"image/jpeg":[],"image/png":[]},multiple:!1,children:e=>{let{getRootProps:n,getInputProps:r}=e;return(0,h.jsx)("div",{...n({className:"dropzone",onDrop:e=>e.stopPropagation()}),children:(0,h.jsxs)(o.o,{borderRadius:8,minH:40,children:[(0,h.jsx)("input",{...r()}),d&&(0,h.jsx)(o.o,{children:(0,h.jsx)(a._,{style:{width:100,height:175},backgroundColor:t?"blue.400":"transparent",p:t?1:0,borderRadius:"xl",objectFit:"cover",m:2,src:"".concat(d.base64),alt:"art"})}),!d&&(0,h.jsx)(i.$,{size:"sm",colorScheme:"white",variant:"ghost",borderRadius:"full",_hover:{backgroundColor:"back"},leftIcon:(0,h.jsx)(s.vzv,{color:"gray",size:40})})]})})}})})}},7385:(e,t,n)=>{n.d(t,{RZ:()=>o,Sk:()=>a,hs:()=>i,nJ:()=>s,yy:()=>r});const r=e=>new Promise((t=>setTimeout(t,e))),o=e=>{let{min:t,max:n}=e;return Math.floor(Math.random()*(n-t+1))+t},a=e=>new Promise(((t,n)=>{const r=new FileReader;r.onloadend=()=>t(r.result),r.readAsDataURL(e)})),i=async e=>{const t=await fetch(e),n=await t.blob();return new Promise(((e,t)=>{const r=new FileReader;r.readAsDataURL(n),r.onloadend=()=>{const t=r.result;e(t)},r.onerror=t}))},s=async e=>{let{imageSrc:t,rate:n,iw:r,ih:o}=e,a=0,i=0,s=0,l=0;o>r||o===r&&n>1?(a=0,i=o/2-r/(2*n),s=r,l=r/n,i<0&&(a=r/2-o*n/2,i=0,s=o*n,l=o)):(a=r/2-o*n/2,i=0,s=o*n,l=o,a<0&&(a=0,i=o/2-r/(2*n),s=r,l=r/n));const h=await(d=t,new Promise(((e,t)=>{const n=new Image;n.addEventListener("load",(()=>e(n))),n.addEventListener("error",(e=>t(e))),n.setAttribute("crossOrigin","anonymous"),n.src=d})));var d;const g=document.createElement("canvas"),u=g.getContext("2d");g.width=s,g.height=l,u.drawImage(h,a,i,s,l,0,0,s,l);const m=g.toDataURL("image/jpeg",1);return{file:c(m,"img.png"),base64:m}},c=(e,t)=>{for(var n=e.split(","),r=n[0].match(/:(.*?);/)[1],o=atob(n[1]),a=o.length,i=new Uint8Array(a);a--;)i[a]=o.charCodeAt(a);return new File([i],t,{type:r})}}}]);