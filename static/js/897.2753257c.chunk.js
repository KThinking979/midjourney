"use strict";(self.webpackChunkemojifi=self.webpackChunkemojifi||[]).push([[897],{32119:(e,t,r)=>{var n=r(40463);t.A=n.WebApp},40463:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WebApp=void 0,r(1216);var n=window;t.WebApp=n.Telegram.WebApp},1216:()=>{!function(){var e={},t="";try{t=location.hash.toString()}catch(m){}var r=c(t),n=p("initParams");if(n)for(var i in n)"undefined"===typeof r[i]&&(r[i]=n[i]);h("initParams",r);var o,s=!1;try{if(s=null!=window.parent&&window!=window.parent){window.addEventListener("message",(function(e){if(e.source===window.parent){try{var t=JSON.parse(e.data)}catch(m){return}if(t&&t.eventType)if("set_custom_style"==t.eventType)"https://web.telegram.org"===e.origin&&(o.innerHTML=t.eventData);else if("reload_iframe"==t.eventType){try{window.parent.postMessage(JSON.stringify({eventType:"iframe_will_reload"}),"*")}catch(m){}location.reload()}else u(t.eventType,t.eventData)}})),o=document.createElement("style"),document.head.appendChild(o);try{window.parent.postMessage(JSON.stringify({eventType:"iframe_ready",eventData:{reload_supported:!0}}),"*")}catch(m){}}}catch(m){}function a(e){try{return e=e.replace(/\+/g,"%20"),decodeURIComponent(e)}catch(m){return e}}function c(e){var t={};if(!(e=e.replace(/^#/,"")).length)return t;if(e.indexOf("=")<0&&e.indexOf("?")<0)return t._path=a(e),t;var r=e.indexOf("?");if(r>=0){var n=e.substr(0,r);t._path=a(n),e=e.substr(r+1)}var i=l(e);for(var o in i)t[o]=i[o];return t}function l(e){var t={};if(!e.length)return t;var r,n,i,o,s=e.split("&");for(r=0;r<s.length;r++)i=a((n=s[r].split("="))[0]),o=null==n[1]?null:a(n[1]),t[i]=o;return t}function u(e,t){console.log("[Telegram.WebView] < receiveEvent",e,t),d(e,(function(r){r(e,t)}))}function d(t,r){var n=e[t];if(void 0!==n&&n.length)for(var i=0;i<n.length;i++)try{r(n[i])}catch(m){}}function h(e,t){try{return window.sessionStorage.setItem("__telegram__"+e,JSON.stringify(t)),!0}catch(m){}return!1}function p(e){try{return JSON.parse(window.sessionStorage.getItem("__telegram__"+e))}catch(m){}return null}window.Telegram||(window.Telegram={}),window.Telegram.WebView={initParams:r,isIframe:s,onEvent:function(t,r){void 0===e[t]&&(e[t]=[]),-1===e[t].indexOf(r)&&e[t].push(r)},offEvent:function(t,r){if(void 0!==e[t]){var n=e[t].indexOf(r);-1!==n&&e[t].splice(n,1)}},postEvent:function(e,t,r){if(t||(t=function(){}),void 0===r&&(r=""),console.log("[Telegram.WebView] > postEvent",e,r),void 0!==window.TelegramWebviewProxy)TelegramWebviewProxy.postEvent(e,JSON.stringify(r)),t();else if(window.external&&"notify"in window.external)window.external.notify(JSON.stringify({eventType:e,eventData:r})),t();else if(s)try{window.parent.postMessage(JSON.stringify({eventType:e,eventData:r}),"*"),t()}catch(m){t(m)}else t({notAvailable:!0})},receiveEvent:u,callEventCallbacks:d},window.Telegram.Utils={urlSafeDecode:a,urlParseQueryString:l,urlParseHashParams:c,urlAppendHashParams:function(e,t){var r=e.indexOf("#");if(r<0)return e+"#"+t;var n=e.substr(r+1);return n.indexOf("=")>=0||n.indexOf("?")>=0?e+"&"+t:n.length>0?e+"?"+t:e+t},sessionStorageSet:h,sessionStorageGet:p},window.TelegramGameProxy_receiveEvent=u,window.TelegramGameProxy={receiveEvent:u}}(),function(){var e=window.Telegram.Utils,t=window.Telegram.WebView,r=t.initParams,n=t.isIframe,i={},o="",s={},a={},c="light",l="6.0",u="unknown";if(r.tgWebAppData&&r.tgWebAppData.length)for(var d in o=r.tgWebAppData,s=e.urlParseQueryString(o)){var h=s[d];try{("{"==h.substr(0,1)&&"}"==h.substr(-1)||"["==h.substr(0,1)&&"]"==h.substr(-1))&&(s[d]=JSON.parse(h))}catch(re){}}if(r.tgWebAppThemeParams&&r.tgWebAppThemeParams.length){var p=r.tgWebAppThemeParams;try{var m;(m=JSON.parse(p))&&C(m)}catch(re){}}(m=e.sessionStorageGet("themeParams"))&&C(m),r.tgWebAppVersion&&(l=r.tgWebAppVersion),r.tgWebAppPlatform&&(u=r.tgWebAppPlatform);var g=window.innerHeight;function f(e){g!=window.innerHeight&&(g=window.innerHeight,b("viewportChanged",{isStateStable:!0}))}function v(e){return e.toString().replace(/^\s+|\s+$/g,"")}function b(e){var r=Array.prototype.slice.call(arguments);e=r.shift(),t.callEventCallbacks("webview:"+e,(function(e){e.apply(i,r)}))}function _(e,r){t.onEvent("webview:"+e,r)}function y(e,r){t.offEvent("webview:"+e,r)}function w(e,t){var r=document.documentElement;r&&r.style&&r.style.setProperty&&r.style.setProperty("--tg-"+e,t)}function C(t){var r;for(var n in"#1c1c1d"==t.bg_color&&t.bg_color==t.secondary_bg_color&&(t.secondary_bg_color="#2c2c2e"),t)(r=O(t[n]))&&(a[n]=r,"bg_color"==n&&w("color-scheme",c=N(r)?"dark":"light"),w(n="theme-"+n.split("_").join("-"),r));e.sessionStorageSet("themeParams",a)}var A={};function k(e){for(var t=100;--t;){for(var r="",n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",i=0;i<e;i++)r+=n[Math.floor(62*Math.random())];if(!A[r])return A[r]={},r}throw Error("WebAppCallbackIdGenerateFailed")}var M=!1,T=!1,I=!0;function E(e){var t;"undefined"!==typeof e&&(I=!!e.is_expanded,M=e.height,e.is_state_stable&&(T=e.height),b("viewportChanged",{isStateStable:!!e.is_state_stable})),t=!1!==T?T-G+"px":G?"calc(100vh - "+G+"px)":"100vh",w("viewport-height",!1!==M?M-G+"px":G?"calc(100vh - "+G+"px)":"100vh"),w("viewport-stable-height",t)}var P=!1;var S=!0;var x="bg_color",W=null;var j=null,F=null;function R(){j==x&&F==W||(j=x,(F=W)?t.postEvent("web_app_set_header_color",!1,{color:W}):t.postEvent("web_app_set_header_color",!1,{color_key:x}))}var B="bg_color";function L(){return"secondary_bg_color"==B?a.secondary_bg_color:"bg_color"==B?a.bg_color:B}var q=null;function D(){var e=L();q!=e&&(q=e,t.postEvent("web_app_set_background_color",!1,{color:e}))}function O(e){var t;if(t=/^\s*#([0-9a-f]{6})\s*$/i.exec(e+=""))return"#"+t[1].toLowerCase();if(t=/^\s*#([0-9a-f])([0-9a-f])([0-9a-f])\s*$/i.exec(e))return("#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]).toLowerCase();if(t=/^\s*rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+\.{0,1}\d*))?\)\s*$/.exec(e)){var r=parseInt(t[1]),n=parseInt(t[2]),i=parseInt(t[3]);return"#"+(r=(r<16?"0":"")+r.toString(16))+(n=(n<16?"0":"")+n.toString(16))+(i=(i<16?"0":"")+i.toString(16))}return!1}function N(e){3==(e=e.replace(/[\s#]/g,"")).length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var t=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),n=parseInt(e.substr(4,2),16);return Math.sqrt(t*t*.299+r*r*.587+n*n*.114)<120}function Q(e){return function(e,t){"string"!==typeof e&&(e=""),"string"!==typeof t&&(t=""),e=e.replace(/^\s+|\s+$/g,"").split("."),t=t.replace(/^\s+|\s+$/g,"").split(".");var r,n,i,o=Math.max(e.length,t.length);for(r=0;r<o;r++)if((n=parseInt(e[r])||0)!=(i=parseInt(t[r])||0))return n>i?1:-1;return 0}(l,e)>=0}var U=function(){var e=!1,r={};Object.defineProperty(r,"isVisible",{set:function(e){a({is_visible:e})},get:function(){return e},enumerable:!0});var n=null;function i(){return{is_visible:e}}function o(){return!!Q("6.1")||(console.warn("[Telegram.WebApp] BackButton is not supported in version "+l),!1)}function s(){var e=i(),r=function(e){return"undefined"===typeof e&&(e=i()),JSON.stringify(e)}(e);n!==r&&(n=r,t.postEvent("web_app_setup_back_button",!1,e))}function a(t){return o()?("undefined"!==typeof t.is_visible&&(e=!!t.is_visible),s(),r):r}return t.onEvent("back_button_pressed",(function(){b("backButtonClicked")})),r.onClick=function(e){return o()&&_("backButtonClicked",e),r},r.offClick=function(e){return o()&&y("backButtonClicked",e),r},r.show=function(){return a({is_visible:!0})},r.hide=function(){return a({is_visible:!1})},r}(),G=0,V=function(){var e=!1,n=!0,i=!1,o="CONTINUE",s=!1,c=!1,l={};Object.defineProperty(l,"text",{set:function(e){l.setParams({text:e})},get:function(){return o},enumerable:!0}),Object.defineProperty(l,"color",{set:function(e){l.setParams({color:e})},get:function(){return s||a.button_color||"#2481cc"},enumerable:!0}),Object.defineProperty(l,"textColor",{set:function(e){l.setParams({text_color:e})},get:function(){return c||a.button_text_color||"#ffffff"},enumerable:!0}),Object.defineProperty(l,"isVisible",{set:function(e){l.setParams({is_visible:e})},get:function(){return e},enumerable:!0}),Object.defineProperty(l,"isProgressVisible",{get:function(){return i},enumerable:!0}),Object.defineProperty(l,"isActive",{set:function(e){l.setParams({is_active:e})},get:function(){return n},enumerable:!0});var u=null;t.onEvent("main_button_pressed",m);var d=null,h={};if(r.tgWebAppDebug){for(var p in d=document.createElement("tg-main-button"),h={font:"600 14px/18px sans-serif",display:"none",width:"100%",height:"48px",borderRadius:"0",background:"no-repeat right center",position:"fixed",left:"0",right:"0",bottom:"0",margin:"0",padding:"15px 20px",textAlign:"center",boxSizing:"border-box",zIndex:"10000"})d.style[p]=h[p];document.addEventListener("DOMContentLoaded",(function e(t){document.removeEventListener("DOMContentLoaded",e),document.body.appendChild(d),d.addEventListener("click",m,!1)}))}function m(){n&&b("mainButtonClicked")}function g(){var t=l.color,r=l.textColor;return e?{is_visible:!0,is_active:n,is_progress_visible:i,text:o,color:t,text_color:r}:{is_visible:!1}}function f(){var e=g(),n=function(e){return"undefined"===typeof e&&(e=g()),JSON.stringify(e)}(e);u!==n&&(u=n,t.postEvent("web_app_setup_main_button",!1,e),r.tgWebAppDebug&&function(e){e.is_visible?(d.style.display="block",G=48,d.style.opacity=e.is_active?"1":"0.8",d.style.cursor=e.is_active?"pointer":"auto",d.disabled=!e.is_active,d.innerText=e.text,d.style.backgroundImage=e.is_progress_visible?"url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20viewport%3D%220%200%2048%2048%22%20width%3D%2248px%22%20height%3D%2248px%22%3E%3Ccircle%20cx%3D%2250%25%22%20cy%3D%2250%25%22%20stroke%3D%22%23fff%22%20stroke-width%3D%222.25%22%20stroke-linecap%3D%22round%22%20fill%3D%22none%22%20stroke-dashoffset%3D%22106%22%20r%3D%229%22%20stroke-dasharray%3D%2256.52%22%20rotate%3D%22-90%22%3E%3Canimate%20attributeName%3D%22stroke-dashoffset%22%20attributeType%3D%22XML%22%20dur%3D%22360s%22%20from%3D%220%22%20to%3D%2212500%22%20repeatCount%3D%22indefinite%22%3E%3C%2Fanimate%3E%3CanimateTransform%20attributeName%3D%22transform%22%20attributeType%3D%22XML%22%20type%3D%22rotate%22%20dur%3D%221s%22%20from%3D%22-90%2024%2024%22%20to%3D%22630%2024%2024%22%20repeatCount%3D%22indefinite%22%3E%3C%2FanimateTransform%3E%3C%2Fcircle%3E%3C%2Fsvg%3E')":"none",d.style.backgroundColor=e.color,d.style.color=e.text_color):(d.style.display="none",G=0);document.documentElement&&(document.documentElement.style.boxSizing="border-box",document.documentElement.style.paddingBottom=G+"px");E()}(e))}return l.setText=function(e){return l.setParams({text:e})},l.onClick=function(e){return _("mainButtonClicked",e),l},l.offClick=function(e){return y("mainButtonClicked",e),l},l.show=function(){return l.setParams({is_visible:!0})},l.hide=function(){return l.setParams({is_visible:!1})},l.enable=function(){return l.setParams({is_active:!0})},l.disable=function(){return l.setParams({is_active:!1})},l.showProgress=function(e){return n=!!e,i=!0,f(),l},l.hideProgress=function(){return l.isActive||(n=!0),i=!1,f(),l},l.setParams=function(t){if("undefined"!==typeof t.text){var r=v(t.text);if(!r.length)throw console.error("[Telegram.WebApp] Main button text is required",t.text),Error("WebAppMainButtonParamInvalid");if(r.length>64)throw console.error("[Telegram.WebApp] Main button text is too long",r),Error("WebAppMainButtonParamInvalid");o=r}if("undefined"!==typeof t.color)if(!1===t.color||null===t.color)s=!1;else{var i=O(t.color);if(!i)throw console.error("[Telegram.WebApp] Main button color format is invalid",t.color),Error("WebAppMainButtonParamInvalid");s=i}if("undefined"!==typeof t.text_color)if(!1===t.text_color||null===t.text_color)c=!1;else{var a=O(t.text_color);if(!a)throw console.error("[Telegram.WebApp] Main button text color format is invalid",t.text_color),Error("WebAppMainButtonParamInvalid");c=a}if("undefined"!==typeof t.is_visible){if(t.is_visible&&!l.text.length)throw console.error("[Telegram.WebApp] Main button text is required"),Error("WebAppMainButtonParamInvalid");e=!!t.is_visible}return"undefined"!==typeof t.is_active&&(n=!!t.is_active),f(),l},l}(),z=function(){var e=!1,r={};Object.defineProperty(r,"isVisible",{set:function(e){a({is_visible:e})},get:function(){return e},enumerable:!0});var n=null;function i(){return{is_visible:e}}function o(){return!!Q("6.10")||(console.warn("[Telegram.WebApp] SettingsButton is not supported in version "+l),!1)}function s(){var e=i(),r=function(e){return"undefined"===typeof e&&(e=i()),JSON.stringify(e)}(e);n!==r&&(n=r,t.postEvent("web_app_setup_settings_button",!1,e))}function a(t){return o()?("undefined"!==typeof t.is_visible&&(e=!!t.is_visible),s(),r):r}return t.onEvent("settings_button_pressed",(function(){b("settingsButtonClicked")})),r.onClick=function(e){return o()&&_("settingsButtonClicked",e),r},r.offClick=function(e){return o()&&y("settingsButtonClicked",e),r},r.show=function(){return a({is_visible:!0})},r.hide=function(){return a({is_visible:!1})},r}(),H=function(){var e={};function r(r){if(!Q("6.1"))return console.warn("[Telegram.WebApp] HapticFeedback is not supported in version "+l),e;if("impact"==r.type){if("light"!=r.impact_style&&"medium"!=r.impact_style&&"heavy"!=r.impact_style&&"rigid"!=r.impact_style&&"soft"!=r.impact_style)throw console.error("[Telegram.WebApp] Haptic impact style is invalid",r.impact_style),Error("WebAppHapticImpactStyleInvalid")}else if("notification"==r.type){if("error"!=r.notification_type&&"success"!=r.notification_type&&"warning"!=r.notification_type)throw console.error("[Telegram.WebApp] Haptic notification type is invalid",r.notification_type),Error("WebAppHapticNotificationTypeInvalid")}else if("selection_change"!=r.type)throw console.error("[Telegram.WebApp] Haptic feedback type is invalid",r.type),Error("WebAppHapticFeedbackTypeInvalid");return t.postEvent("web_app_trigger_haptic_feedback",!1,r),e}return e.impactOccurred=function(e){return r({type:"impact",impact_style:e})},e.notificationOccurred=function(e){return r({type:"notification",notification_type:e})},e.selectionChanged=function(){return r({type:"selection_change"})},e}(),J=function(){var e={};function t(t,r,n){if(!Q("6.9"))throw console.error("[Telegram.WebApp] CloudStorage is not supported in version "+l),Error("WebAppMethodUnsupported");return te(t,r,n),e}return e.setItem=function(e,r,n){return t("saveStorageValue",{key:e,value:r},n)},e.getItem=function(t,r){return e.getItems([t],r?function(e,n){e?r(e):r(null,n[t])}:null)},e.getItems=function(e,r){return t("getStorageValues",{keys:e},r)},e.removeItem=function(t,r){return e.removeItems([t],r)},e.removeItems=function(e,r){return t("deleteStorageValues",{keys:e},r)},e.getKeys=function(e){return t("getStorageKeys",{},e)},e}(),$=function(){var e=!1,r=!1,n="unknown",i=!1,o=!1,s=!1,a="",c={};Object.defineProperty(c,"isInited",{get:function(){return e},enumerable:!0}),Object.defineProperty(c,"isBiometricAvailable",{get:function(){return e&&r},enumerable:!0}),Object.defineProperty(c,"biometricType",{get:function(){return n||"unknown"},enumerable:!0}),Object.defineProperty(c,"isAccessRequested",{get:function(){return i},enumerable:!0}),Object.defineProperty(c,"isAccessGranted",{get:function(){return i&&o},enumerable:!0}),Object.defineProperty(c,"isBiometricTokenSaved",{get:function(){return s},enumerable:!0}),Object.defineProperty(c,"deviceId",{get:function(){return a||""},enumerable:!0});var u={callbacks:[]},d=!1,h=!1,p=!1;function m(){return!!Q("7.2")||(console.warn("[Telegram.WebApp] BiometricManager is not supported in version "+l),!1)}function g(){if(!e)throw console.error("[Telegram.WebApp] BiometricManager should be inited before using."),Error("WebAppBiometricManagerNotInited");return!0}return t.onEvent("biometry_info_received",(function(t,c){e=!0,c.available?(r=!0,n=c.type||"unknown",c.access_requested?(i=!0,o=!!c.access_granted,s=!!c.token_saved):(i=!1,o=!1,s=!1)):(r=!1,n="unknown",i=!1,o=!1,s=!1);if(a=c.device_id||"",u.callbacks.length>0)for(var l=0;l<u.callbacks.length;l++){(0,u.callbacks[l])()}if(d){var h=d;d=!1,h.callback&&h.callback(o)}b("biometricManagerUpdated")})),t.onEvent("biometry_auth_requested",(function(e,t){var r="authorized"==t.status,n=t.token||"";if(h){var i=h;h=!1,i.callback&&i.callback(r,r?n:null)}b("biometricAuthRequested",r?{isAuthenticated:!0,biometricToken:n}:{isAuthenticated:!1})})),t.onEvent("biometry_token_updated",(function(e,t){var n=!1;r&&i&&("updated"==t.status?(s=!0,n=!0):"removed"==t.status&&(s=!1,n=!0));if(p){var o=p;p=!1,o.callback&&o.callback(n)}b("biometricTokenUpdated",{isUpdated:n})})),c.init=function(r){return m()?(e||(r&&u.callbacks.push(r),t.postEvent("web_app_biometry_get_info",!1)),c):c},c.requestAccess=function(e,n){if(!m())return c;if(g(),!r)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(d)throw console.error("[Telegram.WebApp] Access is already requested"),Error("WebAppBiometricManagerAccessRequested");var i={};if("undefined"!==typeof e.reason){var o=v(e.reason);if(o.length>128)throw console.error("[Telegram.WebApp] Biometric reason is too long",o),Error("WebAppBiometricRequestAccessParamInvalid");o.length>0&&(i.reason=o)}return d={callback:n},t.postEvent("web_app_biometry_request_access",!1,i),c},c.authenticate=function(e,n){if(!m())return c;if(g(),!r)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!o)throw console.error("[Telegram.WebApp] Biometric access was not granted by the user."),Error("WebAppBiometricManagerBiometricAccessNotGranted");if(h)throw console.error("[Telegram.WebApp] Authentication request is already in progress."),Error("WebAppBiometricManagerAuthenticationRequested");var i={};if("undefined"!==typeof e.reason){var s=v(e.reason);if(s.length>128)throw console.error("[Telegram.WebApp] Biometric reason is too long",s),Error("WebAppBiometricRequestAccessParamInvalid");s.length>0&&(i.reason=s)}return h={callback:n},t.postEvent("web_app_biometry_request_auth",!1,i),c},c.updateBiometricToken=function(e,n){if(!m())return c;if((e=e||"").length>1024)throw console.error("[Telegram.WebApp] Token is too long",e),Error("WebAppBiometricManagerTokenInvalid");if(g(),!r)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!o)throw console.error("[Telegram.WebApp] Biometric access was not granted by the user."),Error("WebAppBiometricManagerBiometricAccessNotGranted");if(p)throw console.error("[Telegram.WebApp] Token request is already in progress."),Error("WebAppBiometricManagerTokenUpdateRequested");return p={callback:n},t.postEvent("web_app_biometry_update_token",!1,{token:e}),c},c.openSettings=function(){if(!m())return c;if(g(),!r)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!i)throw console.error("[Telegram.WebApp] Biometric access was not requested yet."),Error("WebAppBiometricManagerBiometricsAccessNotRequested");return o?(console.warn("[Telegram.WebApp] Biometric access was granted by the user, no need to go to settings."),c):(t.postEvent("web_app_biometry_open_settings",!1),c)},c}(),K={};var Y=!1;var X=!1;var Z=!1;var ee=!1;function te(e,r,n){if(!Q("6.9"))throw console.error("[Telegram.WebApp] Method invokeCustomMethod is not supported in version "+l),Error("WebAppMethodUnsupported");var i=k(16),o={req_id:i,method:e,params:r||{}};A[i]={callback:n},t.postEvent("web_app_invoke_custom_method",!1,o)}window.Telegram||(window.Telegram={}),Object.defineProperty(i,"initData",{get:function(){return o},enumerable:!0}),Object.defineProperty(i,"initDataUnsafe",{get:function(){return s},enumerable:!0}),Object.defineProperty(i,"version",{get:function(){return l},enumerable:!0}),Object.defineProperty(i,"platform",{get:function(){return u},enumerable:!0}),Object.defineProperty(i,"colorScheme",{get:function(){return c},enumerable:!0}),Object.defineProperty(i,"themeParams",{get:function(){return a},enumerable:!0}),Object.defineProperty(i,"isExpanded",{get:function(){return I},enumerable:!0}),Object.defineProperty(i,"viewportHeight",{get:function(){return(!1===M?window.innerHeight:M)-G},enumerable:!0}),Object.defineProperty(i,"viewportStableHeight",{get:function(){return(!1===T?window.innerHeight:T)-G},enumerable:!0}),Object.defineProperty(i,"isClosingConfirmationEnabled",{set:function(e){var r;r=e,Q("6.2")?(P=!!r,t.postEvent("web_app_setup_closing_behavior",!1,{need_confirmation:P})):console.warn("[Telegram.WebApp] Closing confirmation is not supported in version "+l)},get:function(){return P},enumerable:!0}),Object.defineProperty(i,"isVerticalSwipesEnabled",{set:function(e){var r;r=e,Q("7.7")?(S=!!r,t.postEvent("web_app_setup_swipe_behavior",!1,{allow_vertical_swipe:S})):console.warn("[Telegram.WebApp] Changing swipes behavior is not supported in version "+l)},get:function(){return S},enumerable:!0}),Object.defineProperty(i,"headerColor",{set:function(e){!function(e){if(Q("6.1")){Q("6.9")||(a.bg_color&&a.bg_color==e?e="bg_color":a.secondary_bg_color&&a.secondary_bg_color==e&&(e="secondary_bg_color"));var t=null,r=null;if("bg_color"==e||"secondary_bg_color"==e)r=e;else if(Q("6.9")&&!(t=O(e)))throw console.error("[Telegram.WebApp] Header color format is invalid",e),Error("WebAppHeaderColorInvalid");if(!Q("6.9")&&"bg_color"!=r&&"secondary_bg_color"!=r)throw console.error("[Telegram.WebApp] Header color key should be one of Telegram.WebApp.themeParams.bg_color, Telegram.WebApp.themeParams.secondary_bg_color, 'bg_color', 'secondary_bg_color'",e),Error("WebAppHeaderColorKeyInvalid");x=r,W=t,R()}else console.warn("[Telegram.WebApp] Header color is not supported in version "+l)}(e)},get:function(){return"secondary_bg_color"==x?a.secondary_bg_color:"bg_color"==x?a.bg_color:W},enumerable:!0}),Object.defineProperty(i,"backgroundColor",{set:function(e){!function(e){if(Q("6.1")){var t;if("bg_color"==e||"secondary_bg_color"==e)t=e;else if(!(t=O(e)))throw console.error("[Telegram.WebApp] Background color format is invalid",e),Error("WebAppBackgroundColorInvalid");B=t,D()}else console.warn("[Telegram.WebApp] Background color is not supported in version "+l)}(e)},get:function(){return L()},enumerable:!0}),Object.defineProperty(i,"BackButton",{value:U,enumerable:!0}),Object.defineProperty(i,"MainButton",{value:V,enumerable:!0}),Object.defineProperty(i,"SettingsButton",{value:z,enumerable:!0}),Object.defineProperty(i,"HapticFeedback",{value:H,enumerable:!0}),Object.defineProperty(i,"CloudStorage",{value:J,enumerable:!0}),Object.defineProperty(i,"BiometricManager",{value:$,enumerable:!0}),i.setHeaderColor=function(e){i.headerColor=e},i.setBackgroundColor=function(e){i.backgroundColor=e},i.enableClosingConfirmation=function(){i.isClosingConfirmationEnabled=!0},i.disableClosingConfirmation=function(){i.isClosingConfirmationEnabled=!1},i.enableVerticalSwipes=function(){i.isVerticalSwipesEnabled=!0},i.disableVerticalSwipes=function(){i.isVerticalSwipesEnabled=!1},i.isVersionAtLeast=function(e){return Q(e)},i.onEvent=function(e,t){_(e,t)},i.offEvent=function(e,t){y(e,t)},i.sendData=function(e){if(!e||!e.length)throw console.error("[Telegram.WebApp] Data is required",e),Error("WebAppDataInvalid");if(function(e){if(window.Blob)try{return new Blob([e]).size}catch(re){}for(var t=e.length,r=e.length-1;r>=0;r--){var n=e.charCodeAt(r);n>127&&n<=2047?t++:n>2047&&n<=65535&&(t+=2),n>=56320&&n<=57343&&r--}return t}(e)>4096)throw console.error("[Telegram.WebApp] Data is too long",e),Error("WebAppDataInvalid");t.postEvent("web_app_data_send",!1,{data:e})},i.switchInlineQuery=function(e,n){if(!Q("6.6"))throw console.error("[Telegram.WebApp] Method switchInlineQuery is not supported in version "+l),Error("WebAppMethodUnsupported");if(!r.tgWebAppBotInline)throw console.error("[Telegram.WebApp] Inline mode is disabled for this bot. Read more about inline mode: https://core.telegram.org/bots/inline"),Error("WebAppInlineModeDisabled");if((e=e||"").length>256)throw console.error("[Telegram.WebApp] Inline query is too long",e),Error("WebAppInlineQueryInvalid");var i=[];if(n){if(!Array.isArray(n))throw console.error("[Telegram.WebApp] Choose chat types should be an array",n),Error("WebAppInlineChooseChatTypesInvalid");for(var o={users:1,bots:1,groups:1,channels:1},s=0;s<n.length;s++){var a=n[s];if(!o[a])throw console.error("[Telegram.WebApp] Choose chat type is invalid",a),Error("WebAppInlineChooseChatTypeInvalid");2!=o[a]&&(o[a]=2,i.push(a))}}t.postEvent("web_app_switch_inline_query",!1,{query:e,chat_types:i})},i.openLink=function(e,r){var n=document.createElement("A");if(n.href=e,"http:"!=n.protocol&&"https:"!=n.protocol)throw console.error("[Telegram.WebApp] Url protocol is not supported",e),Error("WebAppTgUrlInvalid");e=n.href;if(r=r||{},Q("6.1")){var i={url:e};Q("6.4")&&r.try_instant_view&&(i.try_instant_view=!0),Q("7.6")&&r.try_browser&&(i.try_browser=r.try_browser),t.postEvent("web_app_open_link",!1,i)}else window.open(e,"_blank")},i.openTelegramLink=function(e){var r=document.createElement("A");if(r.href=e,"http:"!=r.protocol&&"https:"!=r.protocol)throw console.error("[Telegram.WebApp] Url protocol is not supported",e),Error("WebAppTgUrlInvalid");if("t.me"!=r.hostname)throw console.error("[Telegram.WebApp] Url host is not supported",e),Error("WebAppTgUrlInvalid");var i=r.pathname+r.search;n||Q("6.1")?t.postEvent("web_app_open_tg_link",!1,{path_full:i}):location.href="https://t.me"+i},i.openInvoice=function(e,r){var n,i,o=document.createElement("A");if(o.href=e,"http:"!=o.protocol&&"https:"!=o.protocol||"t.me"!=o.hostname||!(n=o.pathname.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/))||!(i=n[2]))throw console.error("[Telegram.WebApp] Invoice url is invalid",e),Error("WebAppInvoiceUrlInvalid");if(!Q("6.1"))throw console.error("[Telegram.WebApp] Method openInvoice is not supported in version "+l),Error("WebAppMethodUnsupported");if(K[i])throw console.error("[Telegram.WebApp] Invoice is already opened"),Error("WebAppInvoiceOpened");K[i]={url:e,callback:r},t.postEvent("web_app_open_invoice",!1,{slug:i})},i.showPopup=function(e,r){if(!Q("6.2"))throw console.error("[Telegram.WebApp] Method showPopup is not supported in version "+l),Error("WebAppMethodUnsupported");if(Y)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppPopupOpened");var n="",i="",o=[],s={};if("undefined"!==typeof e.title){if((n=v(e.title)).length>64)throw console.error("[Telegram.WebApp] Popup title is too long",n),Error("WebAppPopupParamInvalid");n.length>0&&(s.title=n)}if("undefined"!==typeof e.message&&(i=v(e.message)),!i.length)throw console.error("[Telegram.WebApp] Popup message is required",e.message),Error("WebAppPopupParamInvalid");if(i.length>256)throw console.error("[Telegram.WebApp] Popup message is too long",i),Error("WebAppPopupParamInvalid");if(s.message=i,"undefined"!==typeof e.buttons){if(!Array.isArray(e.buttons))throw console.error("[Telegram.WebApp] Popup buttons should be an array",e.buttons),Error("WebAppPopupParamInvalid");for(var a=0;a<e.buttons.length;a++){var c=e.buttons[a],u={},d="";if("undefined"!==typeof c.id&&(d=c.id.toString()).length>64)throw console.error("[Telegram.WebApp] Popup button id is too long",d),Error("WebAppPopupParamInvalid");u.id=d;var h=c.type;if("undefined"===typeof h&&(h="default"),u.type=h,"ok"==h||"close"==h||"cancel"==h);else{if("default"!=h&&"destructive"!=h)throw console.error("[Telegram.WebApp] Popup button type is invalid",h),Error("WebAppPopupParamInvalid");var p="";if("undefined"!==typeof c.text&&(p=v(c.text)),!p.length)throw console.error("[Telegram.WebApp] Popup button text is required for type "+h,c.text),Error("WebAppPopupParamInvalid");if(p.length>64)throw console.error("[Telegram.WebApp] Popup button text is too long",p),Error("WebAppPopupParamInvalid");u.text=p}o.push(u)}}else o.push({id:"",type:"close"});if(o.length<1)throw console.error("[Telegram.WebApp] Popup should have at least one button"),Error("WebAppPopupParamInvalid");if(o.length>3)throw console.error("[Telegram.WebApp] Popup should not have more than 3 buttons"),Error("WebAppPopupParamInvalid");s.buttons=o,Y={callback:r},t.postEvent("web_app_open_popup",!1,s)},i.showAlert=function(e,t){i.showPopup({message:e},t?function(){t()}:null)},i.showConfirm=function(e,t){i.showPopup({message:e,buttons:[{type:"ok",id:"ok"},{type:"cancel"}]},t?function(e){t("ok"==e)}:null)},i.showScanQrPopup=function(e,r){if(!Q("6.4"))throw console.error("[Telegram.WebApp] Method showScanQrPopup is not supported in version "+l),Error("WebAppMethodUnsupported");if(X)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppScanQrPopupOpened");var n="",i={};if("undefined"!==typeof e.text){if((n=v(e.text)).length>64)throw console.error("[Telegram.WebApp] Scan QR popup text is too long",n),Error("WebAppScanQrPopupParamInvalid");n.length>0&&(i.text=n)}X={callback:r},t.postEvent("web_app_open_scan_qr_popup",!1,i)},i.closeScanQrPopup=function(){if(!Q("6.4"))throw console.error("[Telegram.WebApp] Method closeScanQrPopup is not supported in version "+l),Error("WebAppMethodUnsupported");X=!1,t.postEvent("web_app_close_scan_qr_popup",!1)},i.readTextFromClipboard=function(e){if(!Q("6.4"))throw console.error("[Telegram.WebApp] Method readTextFromClipboard is not supported in version "+l),Error("WebAppMethodUnsupported");var r=k(16),n={req_id:r};A[r]={callback:e},t.postEvent("web_app_read_text_from_clipboard",!1,n)},i.requestWriteAccess=function(e){if(!Q("6.9"))throw console.error("[Telegram.WebApp] Method requestWriteAccess is not supported in version "+l),Error("WebAppMethodUnsupported");if(Z)throw console.error("[Telegram.WebApp] Write access is already requested"),Error("WebAppWriteAccessRequested");Z={callback:e},t.postEvent("web_app_request_write_access")},i.requestContact=function(e){if(!Q("6.9"))throw console.error("[Telegram.WebApp] Method requestContact is not supported in version "+l),Error("WebAppMethodUnsupported");if(ee)throw console.error("[Telegram.WebApp] Contact is already requested"),Error("WebAppContactRequested");ee={callback:e},t.postEvent("web_app_request_phone")},i.shareToStory=function(e,r){if(r=r||{},!Q("7.8"))throw console.error("[Telegram.WebApp] Method shareToStory is not supported in version "+l),Error("WebAppMethodUnsupported");var n=document.createElement("A");if(n.href=e,"http:"!=n.protocol&&"https:"!=n.protocol)throw console.error("[Telegram.WebApp] Media url protocol is not supported",url),Error("WebAppMediaUrlInvalid");var i={};if(i.media_url=n.href,"undefined"!==typeof r.text){var o=v(r.text);if(o.length>2048)throw console.error("[Telegram.WebApp] Text is too long",o),Error("WebAppShareToStoryParamInvalid");o.length>0&&(i.text=o)}if("undefined"!==typeof r.widget_link){if(r.widget_link=r.widget_link||{},n.href=r.widget_link.url,"http:"!=n.protocol&&"https:"!=n.protocol)throw console.error("[Telegram.WebApp] Link protocol is not supported",url),Error("WebAppShareToStoryParamInvalid");var s={url:n.href};if("undefined"!==typeof r.widget_link.name){var a=v(r.widget_link.name);if(a.length>48)throw console.error("[Telegram.WebApp] Link name is too long",a),Error("WebAppShareToStoryParamInvalid");a.length>0&&(s.name=a)}i.widget_link=s}t.postEvent("web_app_share_to_story",!1,i)},i.invokeCustomMethod=function(e,t,r){te(e,t,r)},i.ready=function(){t.postEvent("web_app_ready")},i.expand=function(){t.postEvent("web_app_expand")},i.close=function(e){e=e||{};var r={};Q("7.6")&&e.return_back&&(r.return_back=!0),t.postEvent("web_app_close",!1,r)},window.Telegram.WebApp=i,R(),D(),E(),r.tgWebAppShowSettings&&z.show(),window.addEventListener("resize",f),n&&document.addEventListener("click",(function(e){if(!e.metaKey&&!e.ctrlKey){for(var t=e.target;"A"!=t.tagName&&t.parentNode;)t=t.parentNode;"A"!=t.tagName||"_blank"==t.target||"http:"!=t.protocol&&"https:"!=t.protocol||"t.me"!=t.hostname||(i.openTgLink(t.href),e.preventDefault())}})),t.onEvent("theme_changed",(function(e,t){t.theme_params&&(C(t.theme_params),window.Telegram.WebApp.MainButton.setParams({}),D(),b("themeChanged"))})),t.onEvent("viewport_changed",(function(e,t){t.height&&(window.removeEventListener("resize",f),E(t))})),t.onEvent("invoice_closed",(function(e,t){if(t.slug&&K[t.slug]){var r=K[t.slug];delete K[t.slug],r.callback&&r.callback(t.status),b("invoiceClosed",{url:r.url,status:t.status})}})),t.onEvent("popup_closed",(function(e,t){if(Y){var r=Y;Y=!1;var n=null;"undefined"!==typeof t.button_id&&(n=t.button_id),r.callback&&r.callback(n),b("popupClosed",{button_id:n})}})),t.onEvent("qr_text_received",(function(e,r){if(X){var n=X,i=null;"undefined"!==typeof r.data&&(i=r.data),n.callback&&n.callback(i)&&(X=!1,t.postEvent("web_app_close_scan_qr_popup",!1)),b("qrTextReceived",{data:i})}})),t.onEvent("scan_qr_popup_closed",(function(e,t){X=!1,b("scanQrPopupClosed")})),t.onEvent("clipboard_text_received",(function(e,t){if(t.req_id&&A[t.req_id]){var r=A[t.req_id];delete A[t.req_id];var n=null;"undefined"!==typeof t.data&&(n=t.data),r.callback&&r.callback(n),b("clipboardTextReceived",{data:n})}})),t.onEvent("write_access_requested",(function(e,t){if(Z){var r=Z;Z=!1,r.callback&&r.callback("allowed"==t.status),b("writeAccessRequested",{status:t.status})}})),t.onEvent("phone_requested",(function(t,r){if(ee){var n=ee;ee=!1;var i="sent"==r.status,o={status:r.status};i?function(e,t){var r,n,i=0,o=function(){te("getRequestedContact",{},(function(t,s){s&&s.length?(clearTimeout(n),e(s)):r=setTimeout(o,i+=50)}))};n=setTimeout((function(){clearTimeout(r),e("")}),t),o()}((function(t){if(t&&t.length)for(var r in o.response=t,o.responseUnsafe=e.urlParseQueryString(t),o.responseUnsafe){var s=o.responseUnsafe[r];try{("{"==s.substr(0,1)&&"}"==s.substr(-1)||"["==s.substr(0,1)&&"]"==s.substr(-1))&&(o.responseUnsafe[r]=JSON.parse(s))}catch(re){}}n.callback&&n.callback(i,o),b("contactRequested",o)}),3e3):(n.callback&&n.callback(i,o),b("contactRequested",o))}})),t.onEvent("custom_method_invoked",(function(e,t){if(t.req_id&&A[t.req_id]){var r=A[t.req_id];delete A[t.req_id];var n=null,i=null;"undefined"!==typeof t.result&&(n=t.result),"undefined"!==typeof t.error&&(i=t.error),r.callback&&r.callback(i,n)}})),t.postEvent("web_app_request_theme"),t.postEvent("web_app_request_viewport")}()},46206:(e,t,r)=>{r.d(t,{e:()=>_});var n=r(80221),[i,o]=(0,n.q)({name:"AvatarStylesContext",hookName:"useAvatarStyles",providerName:"<Avatar/>"}),s=r(26306),a=r(44414);function c(e){var t;const r=e.split(" "),n=null!=(t=r[0])?t:"",i=r.length>1?r[r.length-1]:"";return n&&i?"".concat(n.charAt(0)).concat(i.charAt(0)):n.charAt(0)}function l(e){const{name:t,getInitials:r,...n}=e,i=o();return(0,a.jsx)(s.B.div,{role:"img","aria-label":t,...n,__css:i.label,children:t?null==r?void 0:r(t):null})}l.displayName="AvatarName";var u=e=>(0,a.jsxs)(s.B.svg,{viewBox:"0 0 128 128",color:"#fff",width:"100%",height:"100%",className:"chakra-avatar__svg",...e,children:[(0,a.jsx)("path",{fill:"currentColor",d:"M103,102.1388 C93.094,111.92 79.3504,118 64.1638,118 C48.8056,118 34.9294,111.768 25,101.7892 L25,95.2 C25,86.8096 31.981,80 40.6,80 L87.4,80 C96.019,80 103,86.8096 103,95.2 L103,102.1388 Z"}),(0,a.jsx)("path",{fill:"currentColor",d:"M63.9961647,24 C51.2938136,24 41,34.2938136 41,46.9961647 C41,59.7061864 51.2938136,70 63.9961647,70 C76.6985159,70 87,59.7061864 87,46.9961647 C87,34.2938136 76.6985159,24 63.9961647,24"})]}),d=r(35812),h=r(9950);function p(e){const{src:t,srcSet:r,onError:n,onLoad:i,getInitials:o,name:c,borderRadius:p,loading:m,iconLabel:g,icon:f=(0,a.jsx)(u,{}),ignoreFallback:v,referrerPolicy:b,crossOrigin:_}=e,y=(0,d.l)({src:t,onError:n,crossOrigin:_,ignoreFallback:v});return!t||!("loaded"===y)?c?(0,a.jsx)(l,{className:"chakra-avatar__initials",getInitials:o,name:c}):(0,h.cloneElement)(f,{role:"img","aria-label":g}):(0,a.jsx)(s.B.img,{src:t,srcSet:r,alt:c,onLoad:i,referrerPolicy:b,crossOrigin:null!=_?_:void 0,className:"chakra-avatar__img",loading:m,__css:{width:"100%",height:"100%",objectFit:"cover",borderRadius:p}})}p.displayName="AvatarImage";var m=r(58039),g=r(47040),f=r(82867),v=r(97681),b={display:"inline-flex",alignItems:"center",justifyContent:"center",textAlign:"center",textTransform:"uppercase",fontWeight:"medium",position:"relative",flexShrink:0},_=(0,m.R)(((e,t)=>{const r=(0,g.o5)("Avatar",e),[n,o]=(0,h.useState)(!1),{src:l,srcSet:d,name:m,showBorder:_,borderRadius:y="full",onError:w,onLoad:C,getInitials:A=c,icon:k=(0,a.jsx)(u,{}),iconLabel:M=" avatar",loading:T,children:I,borderColor:E,ignoreFallback:P,crossOrigin:S,referrerPolicy:x,...W}=(0,f.MN)(e),j={borderRadius:y,borderWidth:_?"2px":void 0,...b,...r.container};return E&&(j.borderColor=E),(0,a.jsx)(s.B.span,{ref:t,...W,className:(0,v.cx)("chakra-avatar",e.className),"data-loaded":(0,v.sE)(n),__css:j,children:(0,a.jsxs)(i,{value:r,children:[(0,a.jsx)(p,{src:l,srcSet:d,loading:T,onLoad:(0,v.Hj)(C,(()=>{o(!0)})),onError:w,getInitials:A,name:m,borderRadius:y,icon:k,iconLabel:M,ignoreFallback:P,crossOrigin:S,referrerPolicy:x}),I]})})}));_.displayName="Avatar"},81374:(e,t,r)=>{r.d(t,{$:()=>v});var n=r(9950);var i=r(80221),[o,s]=(0,i.q)({strict:!1,name:"ButtonGroupContext"}),a=r(26306),c=r(97681),l=r(44414);function u(e){const{children:t,className:r,...i}=e,o=(0,n.isValidElement)(t)?(0,n.cloneElement)(t,{"aria-hidden":!0,focusable:!1}):t,s=(0,c.cx)("chakra-button__icon",r);return(0,l.jsx)(a.B.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...i,className:s,children:o})}u.displayName="ButtonIcon";var d=r(40063);function h(e){const{label:t,placement:r,spacing:i="0.5rem",children:o=(0,l.jsx)(d.y,{color:"currentColor",width:"1em",height:"1em"}),className:s,__css:u,...h}=e,p=(0,c.cx)("chakra-button__spinner",s),m="start"===r?"marginEnd":"marginStart",g=(0,n.useMemo)((()=>({display:"flex",alignItems:"center",position:t?"relative":"absolute",[m]:t?i:0,fontSize:"1em",lineHeight:"normal",...u})),[u,t,m,i]);return(0,l.jsx)(a.B.div,{className:p,...h,__css:g,children:o})}h.displayName="ButtonSpinner";var p=r(87237),m=r(58039),g=r(47040),f=r(82867),v=(0,m.R)(((e,t)=>{const r=s(),i=(0,g.Vl)("Button",{...r,...e}),{isDisabled:o=(null==r?void 0:r.isDisabled),isLoading:u,isActive:d,children:m,leftIcon:v,rightIcon:_,loadingText:y,iconSpacing:w="0.5rem",type:C,spinner:A,spinnerPlacement:k="start",className:M,as:T,...I}=(0,f.MN)(e),E=(0,n.useMemo)((()=>{const e={...null==i?void 0:i._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...i,...!!r&&{_focus:e}}}),[i,r]),{ref:P,type:S}=function(e){const[t,r]=(0,n.useState)(!e);return{ref:(0,n.useCallback)((e=>{e&&r("BUTTON"===e.tagName)}),[]),type:t?"button":void 0}}(T),x={rightIcon:_,leftIcon:v,iconSpacing:w,children:m};return(0,l.jsxs)(a.B.button,{ref:(0,p.SV)(t,P),as:T,type:null!=C?C:S,"data-active":(0,c.sE)(d),"data-loading":(0,c.sE)(u),__css:E,className:(0,c.cx)("chakra-button",M),...I,disabled:o||u,children:[u&&"start"===k&&(0,l.jsx)(h,{className:"chakra-button__spinner--start",label:y,placement:"start",spacing:w,children:A}),u?y||(0,l.jsx)(a.B.span,{opacity:0,children:(0,l.jsx)(b,{...x})}):(0,l.jsx)(b,{...x}),u&&"end"===k&&(0,l.jsx)(h,{className:"chakra-button__spinner--end",label:y,placement:"end",spacing:w,children:A})]})}));function b(e){const{leftIcon:t,rightIcon:r,children:n,iconSpacing:i}=e;return(0,l.jsxs)(l.Fragment,{children:[t&&(0,l.jsx)(u,{marginEnd:i,children:t}),n,r&&(0,l.jsx)(u,{marginStart:i,children:r})]})}v.displayName="Button"},27009:(e,t,r)=>{r.d(t,{Q:()=>c});var n=r(97681),i=r(58039),o=r(26306),s=r(9950),a=r(44414);(0,i.R)((function(e,t){const{spacing:r="0.5rem",spacingX:i,spacingY:l,children:u,justify:d,direction:h,align:p,className:m,shouldWrapChildren:g,...f}=e,v=(0,s.useMemo)((()=>g?s.Children.map(u,((e,t)=>(0,a.jsx)(c,{children:e},t))):u),[u,g]);return(0,a.jsx)(o.B.div,{ref:t,className:(0,n.cx)("chakra-wrap",m),...f,children:(0,a.jsx)(o.B.ul,{className:"chakra-wrap__list",__css:{display:"flex",flexWrap:"wrap",justifyContent:d,alignItems:p,flexDirection:h,listStyleType:"none",gap:r,columnGap:i,rowGap:l,padding:"0"},children:v})})})).displayName="Wrap";var c=(0,i.R)((function(e,t){const{className:r,...i}=e;return(0,a.jsx)(o.B.li,{ref:t,__css:{display:"flex",alignItems:"flex-start"},className:(0,n.cx)("chakra-wrap__listitem",r),...i})}));c.displayName="WrapItem"},42691:(e,t,r)=>{r.d(t,{cC:()=>Xe});var n=r(64467);const i=new Map;function o(e){var t;const r=Array.isArray(e)?e:[e],n=r.join(","),o=null!==(t=i.get(n))&&void 0!==t?t:(()=>{const e=function(e){const t=e.flatMap((e=>function(e,t){if(0===t.length)throw new Error("Empty filter query given");const r=t.map(c).filter((e=>!0!==e));if(0===r.length)return t;throw 1===r.length?new Error(r[0]):new Error("Invalid filter query '".concat(e.join(":"),"'. There are ").concat(r.length," errors after expanding the contained shortcuts: ").concat(r.join("; ")))}(e,a(e)))),r=function(e){const t=Object.entries(e).map((e=>{let[t,r]=e;const n=e=>e[t],i=Object.entries(r).map((e=>{let[t,r]=e;const n=e=>e[t],i=Array.from(r).map((e=>"me"===e?(e,t)=>{const r=t.me.id;return h(e,(e=>e.id===r))}:t=>h(t,(t=>t[e]||t.type===e))));return 0===i.length?d(n):u(n,i.reduce(l))}));return 0===i.length?d(n):u(n,i.reduce(l))}));if(0===t.length)throw new Error("Cannot create filter function for empty query");return t.reduce(l)}(function(e){const t={};for(const[i,o,s]of e){var r;const e=null!==(r=t[i])&&void 0!==r?r:t[i]={};if(void 0!==o){var n;const t=null!==(n=e[o])&&void 0!==n?n:e[o]=new Set;void 0!==s&&t.add(s)}}return t}(t));return e=>!!r(e.update,e)}(s(r));return i.set(n,e),e})();return e=>o(e)}function s(e){return Array.isArray(e)?e.map((e=>e.split(":"))):[e.split(":")]}function a(e){const t=y,r=[e].flatMap((e=>{const[r,n,i]=e;if(!(r in w))return[e];if(!r&&!n&&!i)return[e];const o=w[r].map((e=>[e,n,i]));return void 0===n||n in C&&(n||i)?o:o.filter((e=>{var r;let[i]=e;return!(null===(r=t[i])||void 0===r||!r[n])}))})).flatMap((e=>{const[r,n,i]=e;if(!(n in C))return[e];if(!n&&!i)return[e];const o=C[n].map((e=>[r,e,i]));return void 0===i?o:o.filter((e=>{var n;let[,o]=e;return!(null===(n=t[r])||void 0===n||null===(n=n[o])||void 0===n||!n[i])}))}));if(0===r.length)throw new Error("Shortcuts in '".concat(e.join(":"),"' do not expand to any valid filter query"));return r}function c(e){const[t,r,n,...i]=e;if(void 0===t)return"Empty filter query given";if(!(t in y)){const r=Object.keys(y);return"Invalid L1 filter '".concat(t,"' given in '").concat(e.join(":"),"'. Permitted values are: ").concat(r.map((e=>"'".concat(e,"'"))).join(", "),".")}if(void 0===r)return!0;const o=y[t];if(!(r in o)){const t=Object.keys(o);return"Invalid L2 filter '".concat(r,"' given in '").concat(e.join(":"),"'. Permitted values are: ").concat(t.map((e=>"'".concat(e,"'"))).join(", "),".")}if(void 0===n)return!0;const s=o[r];if(!(n in s)){const i=Object.keys(s);return"Invalid L3 filter '".concat(n,"' given in '").concat(e.join(":"),"'. ").concat(0===i.length?"No further filtering is possible after '".concat(t,":").concat(r,"'."):"Permitted values are: ".concat(i.map((e=>"'".concat(e,"'"))).join(", "),"."))}return 0===i.length||"Cannot filter further than three levels, ':".concat(i.join(":"),"' is invalid!")}function l(e,t){return(r,n)=>e(r,n)||t(r,n)}function u(e,t){return(r,n)=>{const i=e(r,n);return i&&t(i,n)}}function d(e){return(t,r)=>null!=e(t,r)}function h(e,t){const r=e=>null!=e&&t(e);return Array.isArray(e)?e.some(r):r(e)}const p={mention:{},hashtag:{},cashtag:{},bot_command:{},url:{},email:{},phone_number:{},bold:{},italic:{},underline:{},strikethrough:{},spoiler:{},blockquote:{},expandable_blockquote:{},code:{},pre:{},text_link:{},text_mention:{},custom_emoji:{}},m={me:{},is_bot:{},is_premium:{},added_to_attachment_menu:{}},g={emoji:{},custom_emoji:{}},f={forward_origin:{user:{},hidden_user:{},chat:{},channel:{}},is_topic_message:{},is_automatic_forward:{},business_connection_id:{},text:{},animation:{},audio:{},document:{},photo:{},sticker:{is_video:{},is_animated:{},premium_animation:{}},story:{},video:{},video_note:{},voice:{},contact:{},dice:{},game:{},poll:{},venue:{},location:{},paid_media:{},entities:p,caption_entities:p,caption:{},effect_id:{},has_media_spoiler:{},new_chat_title:{},new_chat_photo:{},delete_chat_photo:{},message_auto_delete_timer_changed:{},pinned_message:{},chat_background_set:{},invoice:{},proximity_alert_triggered:{},video_chat_scheduled:{},video_chat_started:{},video_chat_ended:{},video_chat_participants_invited:{},web_app_data:{}},v={...f,sender_boost_count:{},new_chat_members:m,left_chat_member:m,group_chat_created:{},supergroup_chat_created:{},migrate_to_chat_id:{},migrate_from_chat_id:{},successful_payment:{},refunded_payment:{},boost_added:{},users_shared:{},chat_shared:{},connected_website:{},write_access_allowed:{},passport_data:{},forum_topic_created:{},forum_topic_edited:{name:{},icon_custom_emoji_id:{}},forum_topic_closed:{},forum_topic_reopened:{},general_forum_topic_hidden:{},general_forum_topic_unhidden:{}},b={...f,channel_chat_created:{}},_={from:m},y={message:v,edited_message:v,channel_post:b,edited_channel_post:b,business_connection:{can_reply:{},is_enabled:{}},business_message:v,edited_business_message:v,deleted_business_messages:{},inline_query:{},chosen_inline_result:{},callback_query:{data:{},game_short_name:{}},shipping_query:{},pre_checkout_query:{},poll:{},poll_answer:{},my_chat_member:_,chat_member:_,chat_join_request:{},message_reaction:{old_reaction:g,new_reaction:g},message_reaction_count:{reactions:g},chat_boost:{},removed_chat_boost:{}},w={"":["message","channel_post"],msg:["message","channel_post"],edit:["edited_message","edited_channel_post"]},C={"":["entities","caption_entities"],media:["photo","video"],file:["photo","animation","audio","document","video","video_note","voice","sticker"]},A={filterQuery(e){const t=o(e);return e=>t(e)},text(e){const t=A.filterQuery([":text",":caption"]),r=T(e);return e=>{var n,i;if(!t(e))return!1;const o=null!==(n=e.message)&&void 0!==n?n:e.channelPost;return I(e,null!==(i=o.text)&&void 0!==i?i:o.caption,r)}},command(e){const t=A.filterQuery(":entities:bot_command"),r=new Set,n=new Set;return E(e).forEach((e=>{if(e.startsWith("/"))throw new Error("Do not include '/' when registering command handlers (use '".concat(e.substring(1),"' not '").concat(e,"')"));(e.includes("@")?r:n).add(e)})),e=>{var i,o;if(!t(e))return!1;const s=null!==(i=e.message)&&void 0!==i?i:e.channelPost,a=null!==(o=s.text)&&void 0!==o?o:s.caption;return s.entities.some((t=>{if("bot_command"!==t.type)return!1;if(0!==t.offset)return!1;const i=a.substring(1,t.length);if(n.has(i)||r.has(i))return e.match=a.substring(i.length+1).trimStart(),!0;const o=i.indexOf("@");if(-1===o)return!1;if(i.substring(o+1).toLowerCase()!==e.me.username.toLowerCase())return!1;const s=i.substring(0,o);return!!n.has(s)&&(e.match=a.substring(i.length+1).trimStart(),!0)}))}},reaction(e){const t=A.filterQuery("message_reaction"),r="string"===typeof e?[{type:"emoji",emoji:e}]:(Array.isArray(e)?e:[e]).map((e=>"string"===typeof e?{type:"emoji",emoji:e}:e));return e=>{if(!t(e))return!1;const{old_reaction:n,new_reaction:i}=e.messageReaction;for(const t of i){let e=!1;if("emoji"===t.type){for(const r of n)if("emoji"===r.type&&r.emoji===t.emoji){e=!0;break}}else if("custom_emoji"===t.type)for(const r of n)if("custom_emoji"===r.type&&r.custom_emoji_id===t.custom_emoji_id){e=!0;break}if(!e)if("emoji"===t.type){for(const n of r)if("emoji"===n.type&&n.emoji===t.emoji)return!0}else{if("custom_emoji"!==t.type)return!0;for(const e of r)if("custom_emoji"===e.type&&e.custom_emoji_id===t.custom_emoji_id)return!0}}return!1}},chatType(e){const t=new Set(E(e));return e=>{var r;return void 0!==(null===(r=e.chat)||void 0===r?void 0:r.type)&&t.has(e.chat.type)}},callbackQuery(e){const t=A.filterQuery("callback_query:data"),r=T(e);return e=>t(e)&&I(e,e.callbackQuery.data,r)},gameQuery(e){const t=A.filterQuery("callback_query:game_short_name"),r=T(e);return e=>t(e)&&I(e,e.callbackQuery.game_short_name,r)},inlineQuery(e){const t=A.filterQuery("inline_query"),r=T(e);return e=>t(e)&&I(e,e.inlineQuery.query,r)},chosenInlineResult(e){const t=A.filterQuery("chosen_inline_result"),r=T(e);return e=>t(e)&&I(e,e.chosenInlineResult.result_id,r)},preCheckoutQuery(e){const t=A.filterQuery("pre_checkout_query"),r=T(e);return e=>t(e)&&I(e,e.preCheckoutQuery.invoice_payload,r)},shippingQuery(e){const t=A.filterQuery("shipping_query"),r=T(e);return e=>t(e)&&I(e,e.shippingQuery.invoice_payload,r)}};class k{constructor(e,t,r){(0,n.A)(this,"update",void 0),(0,n.A)(this,"api",void 0),(0,n.A)(this,"me",void 0),(0,n.A)(this,"match",void 0),this.update=e,this.api=t,this.me=r}get message(){return this.update.message}get editedMessage(){return this.update.edited_message}get channelPost(){return this.update.channel_post}get editedChannelPost(){return this.update.edited_channel_post}get businessConnection(){return this.update.business_connection}get businessMessage(){return this.update.business_message}get editedBusinessMessage(){return this.update.edited_business_message}get deletedBusinessMessages(){return this.update.deleted_business_messages}get messageReaction(){return this.update.message_reaction}get messageReactionCount(){return this.update.message_reaction_count}get inlineQuery(){return this.update.inline_query}get chosenInlineResult(){return this.update.chosen_inline_result}get callbackQuery(){return this.update.callback_query}get shippingQuery(){return this.update.shipping_query}get preCheckoutQuery(){return this.update.pre_checkout_query}get poll(){return this.update.poll}get pollAnswer(){return this.update.poll_answer}get myChatMember(){return this.update.my_chat_member}get chatMember(){return this.update.chat_member}get chatJoinRequest(){return this.update.chat_join_request}get chatBoost(){return this.update.chat_boost}get removedChatBoost(){return this.update.removed_chat_boost}get msg(){var e,t,r,n,i,o,s;return null!==(e=null!==(t=null!==(r=null!==(n=null!==(i=null!==(o=this.message)&&void 0!==o?o:this.editedMessage)&&void 0!==i?i:this.channelPost)&&void 0!==n?n:this.editedChannelPost)&&void 0!==r?r:this.businessMessage)&&void 0!==t?t:this.editedBusinessMessage)&&void 0!==e?e:null===(s=this.callbackQuery)||void 0===s?void 0:s.message}get chat(){var e,t,r,n,i,o,s,a,c;return null===(e=null!==(t=null!==(r=null!==(n=null!==(i=null!==(o=null!==(s=null!==(a=null!==(c=this.msg)&&void 0!==c?c:this.deletedBusinessMessages)&&void 0!==a?a:this.messageReaction)&&void 0!==s?s:this.messageReactionCount)&&void 0!==o?o:this.myChatMember)&&void 0!==i?i:this.chatMember)&&void 0!==n?n:this.chatJoinRequest)&&void 0!==r?r:this.chatBoost)&&void 0!==t?t:this.removedChatBoost)||void 0===e?void 0:e.chat}get senderChat(){var e;return null===(e=this.msg)||void 0===e?void 0:e.sender_chat}get from(){var e,t,r,n,i,o,s,a,c,l,u,d,h,p,m,g;return null!==(e=null===(t=null!==(r=null!==(n=this.businessConnection)&&void 0!==n?n:this.messageReaction)&&void 0!==r?r:null===(i=null!==(o=null===(s=this.chatBoost)||void 0===s?void 0:s.boost)&&void 0!==o?o:this.removedChatBoost)||void 0===i?void 0:i.source)||void 0===t?void 0:t.user)&&void 0!==e?e:null===(a=null!==(c=null!==(l=null!==(u=null!==(d=null!==(h=null!==(p=null!==(m=null!==(g=this.callbackQuery)&&void 0!==g?g:this.msg)&&void 0!==m?m:this.inlineQuery)&&void 0!==p?p:this.chosenInlineResult)&&void 0!==h?h:this.shippingQuery)&&void 0!==d?d:this.preCheckoutQuery)&&void 0!==u?u:this.myChatMember)&&void 0!==l?l:this.chatMember)&&void 0!==c?c:this.chatJoinRequest)||void 0===a?void 0:a.from}get msgId(){var e,t,r,n,i;return null!==(e=null!==(t=null===(r=this.msg)||void 0===r?void 0:r.message_id)&&void 0!==t?t:null===(n=this.messageReaction)||void 0===n?void 0:n.message_id)&&void 0!==e?e:null===(i=this.messageReactionCount)||void 0===i?void 0:i.message_id}get chatId(){var e,t,r;return null!==(e=null===(t=this.chat)||void 0===t?void 0:t.id)&&void 0!==e?e:null===(r=this.businessConnection)||void 0===r?void 0:r.user_chat_id}get inlineMessageId(){var e,t,r;return null!==(e=null===(t=this.callbackQuery)||void 0===t?void 0:t.inline_message_id)&&void 0!==e?e:null===(r=this.chosenInlineResult)||void 0===r?void 0:r.inline_message_id}get businessConnectionId(){var e,t,r,n,i;return null!==(e=null!==(t=null===(r=this.msg)||void 0===r?void 0:r.business_connection_id)&&void 0!==t?t:null===(n=this.businessConnection)||void 0===n?void 0:n.id)&&void 0!==e?e:null===(i=this.deletedBusinessMessages)||void 0===i?void 0:i.business_connection_id}entities(e){var t,r;const n=this.msg;if(void 0===n)return[];const i=null!==(t=n.text)&&void 0!==t?t:n.caption;if(void 0===i)return[];let o=null!==(r=n.entities)&&void 0!==r?r:n.caption_entities;if(void 0===o)return[];if(void 0!==e){const t=new Set(E(e));o=o.filter((e=>t.has(e.type)))}return o.map((e=>({...e,text:i.substring(e.offset,e.offset+e.length)})))}reactions(){const e=[],t=[],r=[],n=[],i=[],o=[],s=[],a=[],c=this.messageReaction;if(void 0!==c){const{old_reaction:l,new_reaction:u}=c;for(const t of u)"emoji"===t.type?e.push(t.emoji):"custom_emoji"===t.type&&i.push(t.custom_emoji_id);for(const e of l)"emoji"===e.type?n.push(e.emoji):"custom_emoji"===e.type&&a.push(e.custom_emoji_id);t.push(...e),o.push(...i);for(let e=0;e<n.length;e++){const i=t.length;if(0===i)break;const o=n[e];for(let s=0;s<i;s++)if(o===t[s]){r.push(o),n.splice(e,1),t.splice(s,1),e--;break}}for(let e=0;e<a.length;e++){const t=o.length;if(0===t)break;const r=a[e];for(let n=0;n<t;n++)if(r===o[n]){s.push(r),a.splice(e,1),o.splice(n,1),e--;break}}}return{emoji:e,emojiAdded:t,emojiKept:r,emojiRemoved:n,customEmoji:i,customEmojiAdded:o,customEmojiKept:s,customEmojiRemoved:a}}has(e){return k.has.filterQuery(e)(this)}hasText(e){return k.has.text(e)(this)}hasCommand(e){return k.has.command(e)(this)}hasReaction(e){return k.has.reaction(e)(this)}hasChatType(e){return k.has.chatType(e)(this)}hasCallbackQuery(e){return k.has.callbackQuery(e)(this)}hasGameQuery(e){return k.has.gameQuery(e)(this)}hasInlineQuery(e){return k.has.inlineQuery(e)(this)}hasChosenInlineResult(e){return k.has.chosenInlineResult(e)(this)}hasPreCheckoutQuery(e){return k.has.preCheckoutQuery(e)(this)}hasShippingQuery(e){return k.has.shippingQuery(e)(this)}reply(e,t,r){return this.api.sendMessage(M(this.chatId,"sendMessage"),e,{business_connection_id:this.businessConnectionId,...t},r)}forwardMessage(e,t,r){return this.api.forwardMessage(e,M(this.chatId,"forwardMessage"),M(this.msgId,"forwardMessage"),t,r)}forwardMessages(e,t,r,n){return this.api.forwardMessages(e,M(this.chatId,"forwardMessages"),t,r,n)}copyMessage(e,t,r){return this.api.copyMessage(e,M(this.chatId,"copyMessage"),M(this.msgId,"copyMessage"),t,r)}copyMessages(e,t,r,n){return this.api.copyMessages(e,M(this.chatId,"copyMessages"),t,r,n)}replyWithPhoto(e,t,r){return this.api.sendPhoto(M(this.chatId,"sendPhoto"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithAudio(e,t,r){return this.api.sendAudio(M(this.chatId,"sendAudio"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithDocument(e,t,r){return this.api.sendDocument(M(this.chatId,"sendDocument"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithVideo(e,t,r){return this.api.sendVideo(M(this.chatId,"sendVideo"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithAnimation(e,t,r){return this.api.sendAnimation(M(this.chatId,"sendAnimation"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithVoice(e,t,r){return this.api.sendVoice(M(this.chatId,"sendVoice"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithVideoNote(e,t,r){return this.api.sendVideoNote(M(this.chatId,"sendVideoNote"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithMediaGroup(e,t,r){return this.api.sendMediaGroup(M(this.chatId,"sendMediaGroup"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithLocation(e,t,r,n){return this.api.sendLocation(M(this.chatId,"sendLocation"),e,t,{business_connection_id:this.businessConnectionId,...r},n)}editMessageLiveLocation(e,t,r,n){const i=this.inlineMessageId;return void 0!==i?this.api.editMessageLiveLocationInline(i,e,t,r):this.api.editMessageLiveLocation(M(this.chatId,"editMessageLiveLocation"),M(this.msgId,"editMessageLiveLocation"),e,t,r,n)}stopMessageLiveLocation(e,t){const r=this.inlineMessageId;return void 0!==r?this.api.stopMessageLiveLocationInline(r,e):this.api.stopMessageLiveLocation(M(this.chatId,"stopMessageLiveLocation"),M(this.msgId,"stopMessageLiveLocation"),e,t)}sendPaidMedia(e,t,r,n){return this.api.sendPaidMedia(M(this.chatId,"sendPaidMedia"),e,t,r,n)}replyWithVenue(e,t,r,n,i,o){return this.api.sendVenue(M(this.chatId,"sendVenue"),e,t,r,n,{business_connection_id:this.businessConnectionId,...i},o)}replyWithContact(e,t,r,n){return this.api.sendContact(M(this.chatId,"sendContact"),e,t,{business_connection_id:this.businessConnectionId,...r},n)}replyWithPoll(e,t,r,n){return this.api.sendPoll(M(this.chatId,"sendPoll"),e,t,{business_connection_id:this.businessConnectionId,...r},n)}replyWithDice(e,t,r){return this.api.sendDice(M(this.chatId,"sendDice"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithChatAction(e,t,r){return this.api.sendChatAction(M(this.chatId,"sendChatAction"),e,{business_connection_id:this.businessConnectionId,...t},r)}react(e,t,r){return this.api.setMessageReaction(M(this.chatId,"setMessageReaction"),M(this.msgId,"setMessageReaction"),"string"===typeof e?[{type:"emoji",emoji:e}]:(Array.isArray(e)?e:[e]).map((e=>"string"===typeof e?{type:"emoji",emoji:e}:e)),t,r)}getUserProfilePhotos(e,t){return this.api.getUserProfilePhotos(M(this.from,"getUserProfilePhotos").id,e,t)}getUserChatBoosts(e,t){return this.api.getUserChatBoosts(e,M(this.from,"getUserChatBoosts").id,t)}getBusinessConnection(e){return this.api.getBusinessConnection(M(this.businessConnectionId,"getBusinessConnection"),e)}getFile(e){var t,r,n,i,o,s;const a=M(this.msg,"getFile"),c=void 0!==a.photo?a.photo[a.photo.length-1]:null!==(t=null!==(r=null!==(n=null!==(i=null!==(o=null!==(s=a.animation)&&void 0!==s?s:a.audio)&&void 0!==o?o:a.document)&&void 0!==i?i:a.video)&&void 0!==n?n:a.video_note)&&void 0!==r?r:a.voice)&&void 0!==t?t:a.sticker;return this.api.getFile(M(c,"getFile").file_id,e)}kickAuthor(){return this.banAuthor(...arguments)}banAuthor(e,t){return this.api.banChatMember(M(this.chatId,"banAuthor"),M(this.from,"banAuthor").id,e,t)}kickChatMember(){return this.banChatMember(...arguments)}banChatMember(e,t,r){return this.api.banChatMember(M(this.chatId,"banChatMember"),e,t,r)}unbanChatMember(e,t,r){return this.api.unbanChatMember(M(this.chatId,"unbanChatMember"),e,t,r)}restrictAuthor(e,t,r){return this.api.restrictChatMember(M(this.chatId,"restrictAuthor"),M(this.from,"restrictAuthor").id,e,t,r)}restrictChatMember(e,t,r,n){return this.api.restrictChatMember(M(this.chatId,"restrictChatMember"),e,t,r,n)}promoteAuthor(e,t){return this.api.promoteChatMember(M(this.chatId,"promoteAuthor"),M(this.from,"promoteAuthor").id,e,t)}promoteChatMember(e,t,r){return this.api.promoteChatMember(M(this.chatId,"promoteChatMember"),e,t,r)}setChatAdministratorAuthorCustomTitle(e,t){return this.api.setChatAdministratorCustomTitle(M(this.chatId,"setChatAdministratorAuthorCustomTitle"),M(this.from,"setChatAdministratorAuthorCustomTitle").id,e,t)}setChatAdministratorCustomTitle(e,t,r){return this.api.setChatAdministratorCustomTitle(M(this.chatId,"setChatAdministratorCustomTitle"),e,t,r)}banChatSenderChat(e,t){return this.api.banChatSenderChat(M(this.chatId,"banChatSenderChat"),e,t)}unbanChatSenderChat(e,t){return this.api.unbanChatSenderChat(M(this.chatId,"unbanChatSenderChat"),e,t)}setChatPermissions(e,t,r){return this.api.setChatPermissions(M(this.chatId,"setChatPermissions"),e,t,r)}exportChatInviteLink(e){return this.api.exportChatInviteLink(M(this.chatId,"exportChatInviteLink"),e)}createChatInviteLink(e,t){return this.api.createChatInviteLink(M(this.chatId,"createChatInviteLink"),e,t)}editChatInviteLink(e,t,r){return this.api.editChatInviteLink(M(this.chatId,"editChatInviteLink"),e,t,r)}revokeChatInviteLink(e,t){return this.api.revokeChatInviteLink(M(this.chatId,"editChatInviteLink"),e,t)}approveChatJoinRequest(e,t){return this.api.approveChatJoinRequest(M(this.chatId,"approveChatJoinRequest"),e,t)}declineChatJoinRequest(e,t){return this.api.declineChatJoinRequest(M(this.chatId,"declineChatJoinRequest"),e,t)}setChatPhoto(e,t){return this.api.setChatPhoto(M(this.chatId,"setChatPhoto"),e,t)}deleteChatPhoto(e){return this.api.deleteChatPhoto(M(this.chatId,"deleteChatPhoto"),e)}setChatTitle(e,t){return this.api.setChatTitle(M(this.chatId,"setChatTitle"),e,t)}setChatDescription(e,t){return this.api.setChatDescription(M(this.chatId,"setChatDescription"),e,t)}pinChatMessage(e,t,r){return this.api.pinChatMessage(M(this.chatId,"pinChatMessage"),e,t,r)}unpinChatMessage(e,t){return this.api.unpinChatMessage(M(this.chatId,"unpinChatMessage"),e,t)}unpinAllChatMessages(e){return this.api.unpinAllChatMessages(M(this.chatId,"unpinAllChatMessages"),e)}leaveChat(e){return this.api.leaveChat(M(this.chatId,"leaveChat"),e)}getChat(e){return this.api.getChat(M(this.chatId,"getChat"),e)}getChatAdministrators(e){return this.api.getChatAdministrators(M(this.chatId,"getChatAdministrators"),e)}getChatMembersCount(){return this.getChatMemberCount(...arguments)}getChatMemberCount(e){return this.api.getChatMemberCount(M(this.chatId,"getChatMemberCount"),e)}getAuthor(e){return this.api.getChatMember(M(this.chatId,"getAuthor"),M(this.from,"getAuthor").id,e)}getChatMember(e,t){return this.api.getChatMember(M(this.chatId,"getChatMember"),e,t)}setChatStickerSet(e,t){return this.api.setChatStickerSet(M(this.chatId,"setChatStickerSet"),e,t)}deleteChatStickerSet(e){return this.api.deleteChatStickerSet(M(this.chatId,"deleteChatStickerSet"),e)}createForumTopic(e,t,r){return this.api.createForumTopic(M(this.chatId,"createForumTopic"),e,t,r)}editForumTopic(e,t){const r=M(this.msg,"editForumTopic"),n=M(r.message_thread_id,"editForumTopic");return this.api.editForumTopic(r.chat.id,n,e,t)}closeForumTopic(e){const t=M(this.msg,"closeForumTopic"),r=M(t.message_thread_id,"closeForumTopic");return this.api.closeForumTopic(t.chat.id,r,e)}reopenForumTopic(e){const t=M(this.msg,"reopenForumTopic"),r=M(t.message_thread_id,"reopenForumTopic");return this.api.reopenForumTopic(t.chat.id,r,e)}deleteForumTopic(e){const t=M(this.msg,"deleteForumTopic"),r=M(t.message_thread_id,"deleteForumTopic");return this.api.deleteForumTopic(t.chat.id,r,e)}unpinAllForumTopicMessages(e){const t=M(this.msg,"unpinAllForumTopicMessages"),r=M(t.message_thread_id,"unpinAllForumTopicMessages");return this.api.unpinAllForumTopicMessages(t.chat.id,r,e)}editGeneralForumTopic(e,t){return this.api.editGeneralForumTopic(M(this.chatId,"editGeneralForumTopic"),e,t)}closeGeneralForumTopic(e){return this.api.closeGeneralForumTopic(M(this.chatId,"closeGeneralForumTopic"),e)}reopenGeneralForumTopic(e){return this.api.reopenGeneralForumTopic(M(this.chatId,"reopenGeneralForumTopic"),e)}hideGeneralForumTopic(e){return this.api.hideGeneralForumTopic(M(this.chatId,"hideGeneralForumTopic"),e)}unhideGeneralForumTopic(e){return this.api.unhideGeneralForumTopic(M(this.chatId,"unhideGeneralForumTopic"),e)}unpinAllGeneralForumTopicMessages(e){return this.api.unpinAllGeneralForumTopicMessages(M(this.chatId,"unpinAllGeneralForumTopicMessages"),e)}answerCallbackQuery(e,t){return this.api.answerCallbackQuery(M(this.callbackQuery,"answerCallbackQuery").id,"string"===typeof e?{text:e}:e,t)}setChatMenuButton(e,t){return this.api.setChatMenuButton(e,t)}getChatMenuButton(e,t){return this.api.getChatMenuButton(e,t)}setMyDefaultAdministratorRights(e,t){return this.api.setMyDefaultAdministratorRights(e,t)}getMyDefaultAdministratorRights(e,t){return this.api.getMyDefaultAdministratorRights(e,t)}editMessageText(e,t,r){var n,i,o,s,a;const c=this.inlineMessageId;return void 0!==c?this.api.editMessageTextInline(c,e,t):this.api.editMessageText(M(this.chatId,"editMessageText"),M(null!==(n=null!==(i=null===(o=this.msg)||void 0===o?void 0:o.message_id)&&void 0!==i?i:null===(s=this.messageReaction)||void 0===s?void 0:s.message_id)&&void 0!==n?n:null===(a=this.messageReactionCount)||void 0===a?void 0:a.message_id,"editMessageText"),e,t,r)}editMessageCaption(e,t){var r,n,i,o,s;const a=this.inlineMessageId;return void 0!==a?this.api.editMessageCaptionInline(a,e):this.api.editMessageCaption(M(this.chatId,"editMessageCaption"),M(null!==(r=null!==(n=null===(i=this.msg)||void 0===i?void 0:i.message_id)&&void 0!==n?n:null===(o=this.messageReaction)||void 0===o?void 0:o.message_id)&&void 0!==r?r:null===(s=this.messageReactionCount)||void 0===s?void 0:s.message_id,"editMessageCaption"),e,t)}editMessageMedia(e,t,r){var n,i,o,s,a;const c=this.inlineMessageId;return void 0!==c?this.api.editMessageMediaInline(c,e,t):this.api.editMessageMedia(M(this.chatId,"editMessageMedia"),M(null!==(n=null!==(i=null===(o=this.msg)||void 0===o?void 0:o.message_id)&&void 0!==i?i:null===(s=this.messageReaction)||void 0===s?void 0:s.message_id)&&void 0!==n?n:null===(a=this.messageReactionCount)||void 0===a?void 0:a.message_id,"editMessageMedia"),e,t,r)}editMessageReplyMarkup(e,t){var r,n,i,o,s;const a=this.inlineMessageId;return void 0!==a?this.api.editMessageReplyMarkupInline(a,e):this.api.editMessageReplyMarkup(M(this.chatId,"editMessageReplyMarkup"),M(null!==(r=null!==(n=null===(i=this.msg)||void 0===i?void 0:i.message_id)&&void 0!==n?n:null===(o=this.messageReaction)||void 0===o?void 0:o.message_id)&&void 0!==r?r:null===(s=this.messageReactionCount)||void 0===s?void 0:s.message_id,"editMessageReplyMarkup"),e,t)}stopPoll(e,t){var r,n,i,o,s;return this.api.stopPoll(M(this.chatId,"stopPoll"),M(null!==(r=null!==(n=null===(i=this.msg)||void 0===i?void 0:i.message_id)&&void 0!==n?n:null===(o=this.messageReaction)||void 0===o?void 0:o.message_id)&&void 0!==r?r:null===(s=this.messageReactionCount)||void 0===s?void 0:s.message_id,"stopPoll"),e,t)}deleteMessage(e){var t,r,n,i,o;return this.api.deleteMessage(M(this.chatId,"deleteMessage"),M(null!==(t=null!==(r=null===(n=this.msg)||void 0===n?void 0:n.message_id)&&void 0!==r?r:null===(i=this.messageReaction)||void 0===i?void 0:i.message_id)&&void 0!==t?t:null===(o=this.messageReactionCount)||void 0===o?void 0:o.message_id,"deleteMessage"),e)}deleteMessages(e,t){return this.api.deleteMessages(M(this.chatId,"deleteMessages"),e,t)}replyWithSticker(e,t,r){return this.api.sendSticker(M(this.chatId,"sendSticker"),e,{business_connection_id:this.businessConnectionId,...t},r)}getCustomEmojiStickers(e){var t,r;return this.api.getCustomEmojiStickers((null!==(t=null===(r=this.msg)||void 0===r?void 0:r.entities)&&void 0!==t?t:[]).filter((e=>"custom_emoji"===e.type)).map((e=>e.custom_emoji_id)),e)}answerInlineQuery(e,t,r){return this.api.answerInlineQuery(M(this.inlineQuery,"answerInlineQuery").id,e,t,r)}replyWithInvoice(e,t,r,n,i,o,s){return this.api.sendInvoice(M(this.chatId,"sendInvoice"),e,t,r,n,i,o,s)}answerShippingQuery(e,t,r){return this.api.answerShippingQuery(M(this.shippingQuery,"answerShippingQuery").id,e,t,r)}answerPreCheckoutQuery(e,t,r){return this.api.answerPreCheckoutQuery(M(this.preCheckoutQuery,"answerPreCheckoutQuery").id,e,"string"===typeof t?{error_message:t}:t,r)}refundStarPayment(e){var t;return this.api.refundStarPayment(M(this.from,"refundStarPayment").id,M(null===(t=this.msg)||void 0===t?void 0:t.successful_payment,"refundStarPayment").telegram_payment_charge_id,e)}setPassportDataErrors(e,t){return this.api.setPassportDataErrors(M(this.from,"setPassportDataErrors").id,e,t)}replyWithGame(e,t,r){return this.api.sendGame(M(this.chatId,"sendGame"),e,{business_connection_id:this.businessConnectionId,...t},r)}}function M(e,t){if(void 0===e)throw new Error("Missing information for API call to ".concat(t));return e}function T(e){return E(e).map((e=>"string"===typeof e?t=>t===e?e:null:t=>t.match(e)))}function I(e,t,r){for(const n of r){const r=n(t);if(r)return e.match=r,!0}return!1}function E(e){return Array.isArray(e)?e:[e]}(0,n.A)(k,"has",A);class P extends Error{constructor(e,t){super(function(e){let t;if(e instanceof Error)t="".concat(e.name," in middleware: ").concat(e.message);else{const r=typeof e;switch(t="Non-error value of type ".concat(r," thrown in middleware"),r){case"bigint":case"boolean":case"number":case"symbol":t+=": ".concat(e);break;case"string":t+=": ".concat(String(e).substring(0,50));break;default:t+="!"}}return t}(e)),(0,n.A)(this,"error",void 0),(0,n.A)(this,"ctx",void 0),this.error=e,this.ctx=t,this.name="BotError",e instanceof Error&&(this.stack=e.stack)}}function S(e){return"function"===typeof e?e:(t,r)=>e.middleware()(t,r)}function x(e,t){return async(r,n)=>{let i=!1;await e(r,(async()=>{if(i)throw new Error("`next` already called before!");i=!0,await t(r,n)}))}}function W(e,t){return t()}const j=()=>Promise.resolve();async function F(e,t){await e(t,j)}class R{constructor(){(0,n.A)(this,"handler",void 0);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.handler=0===t.length?W:t.map(S).reduce(x)}middleware(){return this.handler}use(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=new R(...t);return this.handler=x(this.handler,S(n)),n}on(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return this.filter(k.has.filterQuery(e),...r)}hears(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return this.filter(k.has.text(e),...r)}command(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return this.filter(k.has.command(e),...r)}reaction(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return this.filter(k.has.reaction(e),...r)}chatType(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return this.filter(k.has.chatType(e),...r)}callbackQuery(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return this.filter(k.has.callbackQuery(e),...r)}gameQuery(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return this.filter(k.has.gameQuery(e),...r)}inlineQuery(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return this.filter(k.has.inlineQuery(e),...r)}chosenInlineResult(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return this.filter(k.has.chosenInlineResult(e),...r)}preCheckoutQuery(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return this.filter(k.has.preCheckoutQuery(e),...r)}shippingQuery(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return this.filter(k.has.shippingQuery(e),...r)}filter(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const i=new R(...r);return this.branch(e,i,W),i}drop(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return this.filter((async t=>!await e(t)),...r)}fork(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=new R(...t),i=S(n);return this.use(((e,t)=>Promise.all([t(),F(i,e)]))),n}lazy(e){return this.use((async(t,r)=>{const n=await e(t),i=Array.isArray(n)?n:[n];await S(new R(...i))(t,r)}))}route(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:W;return this.lazy((async n=>{var i;const o=await e(n);return null!==(i=void 0!==o&&t[o]?t[o]:r)&&void 0!==i?i:[]}))}branch(e,t,r){return this.lazy((async n=>await e(n)?t:r))}errorBoundary(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const i=new R(...r),o=S(i);return this.use((async(t,r)=>{let n=!1;const i=()=>(n=!0,Promise.resolve());try{await o(t,i)}catch(s){n=!1,await e(new P(s,t),i)}n&&await r()})),i}}var B=1e3,L=60*B,q=60*L,D=24*q,O=7*D,N=365.25*D,Q=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return function(e){if(e=String(e),e.length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*N;case"weeks":case"week":case"w":return r*O;case"days":case"day":case"d":return r*D;case"hours":case"hour":case"hrs":case"hr":case"h":return r*q;case"minutes":case"minute":case"mins":case"min":case"m":return r*L;case"seconds":case"second":case"secs":case"sec":case"s":return r*B;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}(e);if("number"===r&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=D)return U(e,t,D,"day");if(t>=q)return U(e,t,q,"hour");if(t>=L)return U(e,t,L,"minute");if(t>=B)return U(e,t,B,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=D)return Math.round(e/D)+"d";if(t>=q)return Math.round(e/q)+"h";if(t>=L)return Math.round(e/L)+"m";if(t>=B)return Math.round(e/B)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function U(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}function G(){throw new Error("setTimeout has not been defined")}function V(){throw new Error("clearTimeout has not been defined")}var z,H=G,J=V;function $(e){if(H===setTimeout)return setTimeout(e,0);if((H===G||!H)&&setTimeout)return H=setTimeout,setTimeout(e,0);try{return H(e,0)}catch(t){try{return H.call(null,e,0)}catch(r){return H.call(this,e,0)}}}"function"===typeof(z="undefined"!==typeof window?window:"undefined"!==typeof self?self:{}).setTimeout&&(H=setTimeout),"function"===typeof z.clearTimeout&&(J=clearTimeout);var K,Y=[],X=!1,Z=-1;function ee(){X&&K&&(X=!1,K.length?Y=K.concat(Y):Z=-1,Y.length&&te())}function te(){if(!X){var e=$(ee);X=!0;for(var t=Y.length;t;){for(K=Y,Y=[];++Z<t;)K&&K[Z].run();Z=-1,t=Y.length}K=null,X=!1,function(e){if(J===clearTimeout)return clearTimeout(e);if((J===V||!J)&&clearTimeout)return J=clearTimeout,clearTimeout(e);try{return J(e)}catch(t){try{return J.call(null,e)}catch(r){return J.call(this,e)}}}(e)}}function re(e,t){this.fun=e,this.array=t}re.prototype.run=function(){this.fun.apply(null,this.array)};function ne(){}var ie=ne,oe=ne,se=ne,ae=ne,ce=ne,le=ne,ue=ne;var de=z.performance||{},he=de.now||de.mozNow||de.msNow||de.oNow||de.webkitNow||function(){return(new Date).getTime()};var pe=new Date;var me={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];Y.push(new re(e,t)),1!==Y.length||X||$(te)},title:"browser",browser:!0,env:{NODE_ENV:"production"},argv:[],version:"",versions:{},on:ie,addListener:oe,once:se,off:ae,removeListener:ce,removeAllListeners:le,emit:ue,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*he.call(de),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-pe)/1e3}};var ge,fe,ve,be=function(e){function t(e){let n,i,o,s=null;function a(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];if(!a.enabled)return;const o=a,s=Number(new Date),c=s-(n||s);o.diff=c,o.prev=n,o.curr=s,n=s,r[0]=t.coerce(r[0]),"string"!==typeof r[0]&&r.unshift("%O");let l=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,((e,n)=>{if("%%"===e)return"%";l++;const i=t.formatters[n];if("function"===typeof i){const t=r[l];e=i.call(o,t),r.splice(l,1),l--}return e})),t.formatArgs.call(o,r);(o.log||t.log).apply(o,r)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"===typeof t.init&&t.init(a),a}function r(e,r){const n=t(this.namespace+("undefined"===typeof r?":":r)+e);return n.log=this.log,n}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(n),...t.skips.map(n).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"===typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=Q,t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t},_e=(ge=function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))})),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(r){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(r){}return!e&&"undefined"!==typeof me&&"env"in me&&(e=me.env.DEBUG),e},t.useColors=function(){return!("undefined"===typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"===typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=be(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},ge(ve={path:fe,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}((void 0===t||null===t)&&ve.path)}},ve.exports),ve.exports);_e.colors,_e.destroy,_e.formatArgs,_e.load,_e.log,_e.save,_e.storage,_e.useColors;const ye=_e("grammy:warn");class we extends Error{constructor(e,t,r,i){var o;super("".concat(e," (").concat(t.error_code,": ").concat(t.description,")")),(0,n.A)(this,"method",void 0),(0,n.A)(this,"payload",void 0),(0,n.A)(this,"ok",void 0),(0,n.A)(this,"error_code",void 0),(0,n.A)(this,"description",void 0),(0,n.A)(this,"parameters",void 0),this.method=r,this.payload=i,this.ok=!1,this.name="GrammyError",this.error_code=t.error_code,this.description=t.description,this.parameters=null!==(o=t.parameters)&&void 0!==o?o:{}}}class Ce extends Error{constructor(e,t){super(e),(0,n.A)(this,"error",void 0),this.error=t,this.name="HttpError"}}const Ae="windows"===((e,t,r)=>{const{Deno:n}=globalThis;if("string"===typeof(null===n||void 0===n||null===(e=n.build)||void 0===e?void 0:e.os))return n.build.os;const{navigator:i}=globalThis;return null!==i&&void 0!==i&&null!==(t=i.appVersion)&&void 0!==t&&null!==(r=t.includes)&&void 0!==r&&r.call(t,"Win")?"windows":"linux"})();function ke(e,t){if(t.length>=e.length)return e;const r=e.length-t.length;for(let n=t.length-1;n>=0;--n)if(e.charCodeAt(r+n)!==t.charCodeAt(n))return e;return e.slice(0,-t.length)}function Me(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=!1,i=e.length;for(let o=e.length-1;o>=r;--o)if(t(e.charCodeAt(o))){if(n){r=o+1;break}}else n||(n=!0,i=o+1);return e.slice(r,i)}function Te(e,t){if(function(e){if("string"!==typeof e)throw new TypeError("Path must be a string. Received ".concat(JSON.stringify(e)))}(e),0===e.length)return e;if("string"!==typeof t)throw new TypeError("Suffix must be a string. Received ".concat(JSON.stringify(t)))}function Ie(e,t){if(e.length<=1)return e;let r=e.length;for(let n=e.length-1;n>0&&t(e.charCodeAt(n));n--)r=n;return e.slice(0,r)}function Ee(e){return 47===e}function Pe(e){return 47===e||92===e}function Se(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Ae?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Te(e,t);let r=0;if(e.length>=2){((n=e.charCodeAt(0))>=97&&n<=122||n>=65&&n<=90)&&58===e.charCodeAt(1)&&(r=2)}var n;const i=Ie(Me(e,Pe,r),Pe);return t?ke(i,t):i}(e,t):function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Te(e,t);const r=Ie(Me(e,Ee),Ee);return t?ke(r,t):r}(e,t)}class xe{constructor(e,t){var r;(0,n.A)(this,"consumed",!1),(0,n.A)(this,"fileData",void 0),(0,n.A)(this,"filename",void 0),this.fileData=e,null!==(r=t)&&void 0!==r||(t=this.guessFilename(e)),this.filename=t}guessFilename(e){if("string"===typeof e)return Se(e);if("object"===typeof e){if("url"in e)return Se(e.url);if(e instanceof URL)return Se(e.pathname)||Se(e.hostname)}}toRaw(){if(this.consumed)throw new Error("Cannot reuse InputFile data source!");const e=this.fileData;return e instanceof Blob?e.stream():e instanceof URL?We(e):"url"in e?We(e.url):(e instanceof Uint8Array||(this.consumed=!0),e)}}async function*We(e){const{body:t}=await fetch(e);if(null===t)throw new Error("Download failed, no response body from '".concat(e,"'"));yield*t}function je(e){return e instanceof xe||"object"===typeof e&&null!==e&&Object.values(e).some((e=>Array.isArray(e)?e.some(je):e instanceof xe||je(e)))}function Fe(e){return JSON.stringify(e,((e,t)=>null!==t&&void 0!==t?t:void 0))}function Re(e){return{method:"POST",headers:{"content-type":"application/json",connection:"keep-alive"},body:Fe(e)}}function Be(e,t){const r="----------"+Le(32),n=async function*(e,t){const r=De(e);yield qe.encode("--".concat(t,"\r\n"));const n=qe.encode("\r\n--".concat(t,"\r\n"));let i=!0;for(const[o,s]of Object.entries(e))null!=s&&(i||(yield n),yield Oe(o,"object"===typeof s?Fe(s):s),i=!1);for(const{id:o,origin:s,file:a}of r)i||(yield n),yield*Ne(o,s,a),i=!1;yield qe.encode("\r\n--".concat(t,"--\r\n"))}(e,r),i=async function*(e,t){try{yield*e}catch(r){t(r)}}(n,t),o=(e=>{const t=e[Symbol.asyncIterator]();return new ReadableStream({async pull(e){const r=await t.next();r.done?e.close():e.enqueue(r.value)}})})(i);return{method:"POST",headers:{"content-type":"multipart/form-data; boundary=".concat(r),connection:"keep-alive"},body:o}}function Le(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16;return Array.from(Array(e)).map((()=>Math.random().toString(36)[2]||0)).join("")}const qe=new TextEncoder;function De(e){return"object"!==typeof e||null===e?[]:Object.entries(e).flatMap((t=>{let[r,n]=t;if(Array.isArray(n))return n.flatMap((e=>De(e)));if(n instanceof xe){const t=Le();Object.assign(e,{[r]:"attach://".concat(t)});return{id:t,origin:"media"===r&&"type"in e&&"string"===typeof e.type?e.type:r,file:n}}return De(n)}))}function Oe(e,t){return qe.encode('content-disposition:form-data;name="'.concat(e,'"\r\n\r\n').concat(t))}async function*Ne(e,t,r){const n=r.filename||"".concat(t,".").concat(function(e){switch(e){case"certificate":return"pem";case"photo":case"thumbnail":return"jpg";case"voice":return"ogg";case"audio":return"mp3";case"animation":case"video":case"video_note":return"mp4";case"sticker":return"webp";default:return"dat"}}(t));if(n.includes("\r")||n.includes("\n"))throw new Error("File paths cannot contain carriage-return (\\r) or newline (\\n) characters! Filename for property '".concat(t,'\' was:\n"""\n').concat(n,'\n"""'));yield qe.encode('content-disposition:form-data;name="'.concat(e,'";filename=').concat(n,"\r\ncontent-type:application/octet-stream\r\n\r\n"));const i=await r.toRaw();i instanceof Uint8Array?yield i:yield*i}const Qe=_e("grammy:core");function Ue(e,t){return(r,n,i)=>t(e,r,n,i)}class Ge{constructor(e){var t,r,i,o,s,a;let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,n.A)(this,"token",void 0),(0,n.A)(this,"webhookReplyEnvelope",void 0),(0,n.A)(this,"options",void 0),(0,n.A)(this,"hasUsedWebhookReply",void 0),(0,n.A)(this,"installedTransformers",void 0),(0,n.A)(this,"call",void 0),this.token=e,this.webhookReplyEnvelope=l,this.hasUsedWebhookReply=!1,this.installedTransformers=[],this.call=async(e,t,r)=>{const n=null!==t&&void 0!==t?t:{};Qe("Calling ".concat(e)),void 0!==r&&function(e,t,r){if("function"===typeof(null===r||void 0===r?void 0:r.addEventListener))return;let n=JSON.stringify(t);n.length>20&&(n=n.substring(0,16)+" ...");let i=JSON.stringify(r);i.length>20&&(i=i.substring(0,16)+" ...");throw new Error("Incorrect abort signal instance found! You passed two payloads to '".concat(e,"' but you should merge the second one containing '").concat(i,"' into the first one containing '").concat(n,"'! If you are using context shortcuts, you may want to use a method on 'ctx.api' instead.\n\nIf you want to prevent such mistakes in the future, consider using TypeScript. https://www.typescriptlang.org/"))}(e,n,r);const i=this.options,o=je(n);if(void 0!==this.webhookReplyEnvelope.send&&!this.hasUsedWebhookReply&&!o&&i.canUseWebhookReply(e)){this.hasUsedWebhookReply=!0;const t=Re({...n,method:e});return await this.webhookReplyEnvelope.send(t.body),{ok:!0,result:!0}}const s=function(e){const t=new AbortController;if(void 0===e)return t;const r=e;function n(){t.abort(),r.removeEventListener("abort",n)}r.aborted?n():r.addEventListener("abort",n);return{abort:n,signal:t.signal}}(r),a=function(e,t,r){let n;const i=new Promise(((i,o)=>{n=setTimeout((()=>{const n="Request to '".concat(r,"' timed out after ").concat(t," seconds");o(new Error(n)),e.abort()}),1e3*t)}));return{promise:i,handle:n}}(s,i.timeoutSeconds,e),c=function(e){let t=e=>{throw e};return{promise:new Promise(((r,n)=>{t=t=>{n(t),e.abort()}})),catch:t}}(s),l=i.buildUrl(i.apiRoot,this.token,e,i.environment),u=o?Be(n,(e=>c.catch(e))):Re(n),d=s.signal,h={...i.baseFetchConfig,signal:d,...u},p=fetch(l instanceof URL?l.href:l,h).catch(function(e,t){return r=>{let n="Network request for '".concat(e,"' failed!");throw function(e){return"object"===typeof e&&null!==e&&"status"in e&&"statusText"in e}(r)&&(n+=" (".concat(r.status,": ").concat(r.statusText,")")),t&&r instanceof Error&&(n+=" ".concat(r.message)),new Ce(n,r)}}(e,i.sensitiveLogs)),m=[p,c.promise,a.promise];try{const e=await Promise.race(m);return await e.json()}finally{void 0!==a.handle&&clearTimeout(a.handle)}};const u=null!==(t=c.apiRoot)&&void 0!==t?t:"https://api.telegram.org",d=null!==(r=c.environment)&&void 0!==r?r:"prod";if(this.options={apiRoot:u,environment:d,buildUrl:null!==(i=c.buildUrl)&&void 0!==i?i:Ve,timeoutSeconds:null!==(o=c.timeoutSeconds)&&void 0!==o?o:500,baseFetchConfig:{...c.baseFetchConfig},canUseWebhookReply:null!==(s=c.canUseWebhookReply)&&void 0!==s?s:()=>!1,sensitiveLogs:null!==(a=c.sensitiveLogs)&&void 0!==a&&a},this.options.apiRoot.endsWith("/"))throw new Error("Remove the trailing '/' from the 'apiRoot' option (use '".concat(this.options.apiRoot.substring(0,this.options.apiRoot.length-1),"' instead of '").concat(this.options.apiRoot,"')"))}use(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.call=t.reduce(Ue,this.call),this.installedTransformers.push(...t),this}async callApi(e,t,r){const n=await this.call(e,t,r);if(n.ok)return n.result;throw function(e,t,r){switch(e.error_code){case 401:ye("Error 401 means that your bot token is wrong, talk to https://t.me/BotFather to check it.");break;case 409:ye("Error 409 means that you are running your bot several times on long polling. Consider revoking the bot token if you believe that no other instance is running.")}return new we("Call to '".concat(t,"' failed!"),e,t,r)}(n,e,t)}}const Ve=(e,t,r,n)=>{const i="test"===n?"test/":"";return"".concat(e,"/bot").concat(t,"/").concat(i).concat(r)},ze={set:()=>!1,defineProperty:()=>!1,deleteProperty:()=>!1,ownKeys:()=>[]};class He{constructor(e,t,r){(0,n.A)(this,"token",void 0),(0,n.A)(this,"options",void 0),(0,n.A)(this,"raw",void 0),(0,n.A)(this,"config",void 0),this.token=e,this.options=t;const{raw:i,use:o,installedTransformers:s}=function(e,t,r){const n=new Ge(e,t,r),i={get:(e,t)=>"toJSON"===t?"__internal":n.callApi.bind(n,t),...ze},o={raw:new Proxy({},i),installedTransformers:n.installedTransformers,use:function(){return n.use(...arguments),o}};return o}(e,t,r);this.raw=i,this.config={use:o,installedTransformers:()=>s.slice()}}getUpdates(e,t){return this.raw.getUpdates({...e},t)}setWebhook(e,t,r){return this.raw.setWebhook({url:e,...t},r)}deleteWebhook(e,t){return this.raw.deleteWebhook({...e},t)}getWebhookInfo(e){return this.raw.getWebhookInfo(e)}getMe(e){return this.raw.getMe(e)}logOut(e){return this.raw.logOut(e)}close(e){return this.raw.close(e)}sendMessage(e,t,r,n){return this.raw.sendMessage({chat_id:e,text:t,...r},n)}forwardMessage(e,t,r,n,i){return this.raw.forwardMessage({chat_id:e,from_chat_id:t,message_id:r,...n},i)}forwardMessages(e,t,r,n,i){return this.raw.forwardMessages({chat_id:e,from_chat_id:t,message_ids:r,...n},i)}copyMessage(e,t,r,n,i){return this.raw.copyMessage({chat_id:e,from_chat_id:t,message_id:r,...n},i)}copyMessages(e,t,r,n,i){return this.raw.copyMessages({chat_id:e,from_chat_id:t,message_ids:r,...n},i)}sendPhoto(e,t,r,n){return this.raw.sendPhoto({chat_id:e,photo:t,...r},n)}sendAudio(e,t,r,n){return this.raw.sendAudio({chat_id:e,audio:t,...r},n)}sendDocument(e,t,r,n){return this.raw.sendDocument({chat_id:e,document:t,...r},n)}sendVideo(e,t,r,n){return this.raw.sendVideo({chat_id:e,video:t,...r},n)}sendAnimation(e,t,r,n){return this.raw.sendAnimation({chat_id:e,animation:t,...r},n)}sendVoice(e,t,r,n){return this.raw.sendVoice({chat_id:e,voice:t,...r},n)}sendVideoNote(e,t,r,n){return this.raw.sendVideoNote({chat_id:e,video_note:t,...r},n)}sendMediaGroup(e,t,r,n){return this.raw.sendMediaGroup({chat_id:e,media:t,...r},n)}sendLocation(e,t,r,n,i){return this.raw.sendLocation({chat_id:e,latitude:t,longitude:r,...n},i)}editMessageLiveLocation(e,t,r,n,i,o){return this.raw.editMessageLiveLocation({chat_id:e,message_id:t,latitude:r,longitude:n,...i},o)}editMessageLiveLocationInline(e,t,r,n,i){return this.raw.editMessageLiveLocation({inline_message_id:e,latitude:t,longitude:r,...n},i)}stopMessageLiveLocation(e,t,r,n){return this.raw.stopMessageLiveLocation({chat_id:e,message_id:t,...r},n)}stopMessageLiveLocationInline(e,t,r){return this.raw.stopMessageLiveLocation({inline_message_id:e,...t},r)}sendPaidMedia(e,t,r,n,i){return this.raw.sendPaidMedia({chat_id:e,star_count:t,media:r,...n},i)}sendVenue(e,t,r,n,i,o,s){return this.raw.sendVenue({chat_id:e,latitude:t,longitude:r,title:n,address:i,...o},s)}sendContact(e,t,r,n,i){return this.raw.sendContact({chat_id:e,phone_number:t,first_name:r,...n},i)}sendPoll(e,t,r,n,i){return this.raw.sendPoll({chat_id:e,question:t,options:r,...n},i)}sendDice(e,t,r,n){return this.raw.sendDice({chat_id:e,emoji:t,...r},n)}setMessageReaction(e,t,r,n,i){return this.raw.setMessageReaction({chat_id:e,message_id:t,reaction:r,...n},i)}sendChatAction(e,t,r,n){return this.raw.sendChatAction({chat_id:e,action:t,...r},n)}getUserProfilePhotos(e,t,r){return this.raw.getUserProfilePhotos({user_id:e,...t},r)}getUserChatBoosts(e,t,r){return this.raw.getUserChatBoosts({chat_id:e,user_id:t},r)}getBusinessConnection(e,t){return this.raw.getBusinessConnection({business_connection_id:e},t)}getFile(e,t){return this.raw.getFile({file_id:e},t)}kickChatMember(){return this.banChatMember(...arguments)}banChatMember(e,t,r,n){return this.raw.banChatMember({chat_id:e,user_id:t,...r},n)}unbanChatMember(e,t,r,n){return this.raw.unbanChatMember({chat_id:e,user_id:t,...r},n)}restrictChatMember(e,t,r,n,i){return this.raw.restrictChatMember({chat_id:e,user_id:t,permissions:r,...n},i)}promoteChatMember(e,t,r,n){return this.raw.promoteChatMember({chat_id:e,user_id:t,...r},n)}setChatAdministratorCustomTitle(e,t,r,n){return this.raw.setChatAdministratorCustomTitle({chat_id:e,user_id:t,custom_title:r},n)}banChatSenderChat(e,t,r){return this.raw.banChatSenderChat({chat_id:e,sender_chat_id:t},r)}unbanChatSenderChat(e,t,r){return this.raw.unbanChatSenderChat({chat_id:e,sender_chat_id:t},r)}setChatPermissions(e,t,r,n){return this.raw.setChatPermissions({chat_id:e,permissions:t,...r},n)}exportChatInviteLink(e,t){return this.raw.exportChatInviteLink({chat_id:e},t)}createChatInviteLink(e,t,r){return this.raw.createChatInviteLink({chat_id:e,...t},r)}editChatInviteLink(e,t,r,n){return this.raw.editChatInviteLink({chat_id:e,invite_link:t,...r},n)}revokeChatInviteLink(e,t,r){return this.raw.revokeChatInviteLink({chat_id:e,invite_link:t},r)}approveChatJoinRequest(e,t,r){return this.raw.approveChatJoinRequest({chat_id:e,user_id:t},r)}declineChatJoinRequest(e,t,r){return this.raw.declineChatJoinRequest({chat_id:e,user_id:t},r)}setChatPhoto(e,t,r){return this.raw.setChatPhoto({chat_id:e,photo:t},r)}deleteChatPhoto(e,t){return this.raw.deleteChatPhoto({chat_id:e},t)}setChatTitle(e,t,r){return this.raw.setChatTitle({chat_id:e,title:t},r)}setChatDescription(e,t,r){return this.raw.setChatDescription({chat_id:e,description:t},r)}pinChatMessage(e,t,r,n){return this.raw.pinChatMessage({chat_id:e,message_id:t,...r},n)}unpinChatMessage(e,t,r){return this.raw.unpinChatMessage({chat_id:e,message_id:t},r)}unpinAllChatMessages(e,t){return this.raw.unpinAllChatMessages({chat_id:e},t)}leaveChat(e,t){return this.raw.leaveChat({chat_id:e},t)}getChat(e,t){return this.raw.getChat({chat_id:e},t)}getChatAdministrators(e,t){return this.raw.getChatAdministrators({chat_id:e},t)}getChatMembersCount(){return this.getChatMemberCount(...arguments)}getChatMemberCount(e,t){return this.raw.getChatMemberCount({chat_id:e},t)}getChatMember(e,t,r){return this.raw.getChatMember({chat_id:e,user_id:t},r)}setChatStickerSet(e,t,r){return this.raw.setChatStickerSet({chat_id:e,sticker_set_name:t},r)}deleteChatStickerSet(e,t){return this.raw.deleteChatStickerSet({chat_id:e},t)}getForumTopicIconStickers(e){return this.raw.getForumTopicIconStickers(e)}createForumTopic(e,t,r,n){return this.raw.createForumTopic({chat_id:e,name:t,...r},n)}editForumTopic(e,t,r,n){return this.raw.editForumTopic({chat_id:e,message_thread_id:t,...r},n)}closeForumTopic(e,t,r){return this.raw.closeForumTopic({chat_id:e,message_thread_id:t},r)}reopenForumTopic(e,t,r){return this.raw.reopenForumTopic({chat_id:e,message_thread_id:t},r)}deleteForumTopic(e,t,r){return this.raw.deleteForumTopic({chat_id:e,message_thread_id:t},r)}unpinAllForumTopicMessages(e,t,r){return this.raw.unpinAllForumTopicMessages({chat_id:e,message_thread_id:t},r)}editGeneralForumTopic(e,t,r){return this.raw.editGeneralForumTopic({chat_id:e,name:t},r)}closeGeneralForumTopic(e,t){return this.raw.closeGeneralForumTopic({chat_id:e},t)}reopenGeneralForumTopic(e,t){return this.raw.reopenGeneralForumTopic({chat_id:e},t)}hideGeneralForumTopic(e,t){return this.raw.hideGeneralForumTopic({chat_id:e},t)}unhideGeneralForumTopic(e,t){return this.raw.unhideGeneralForumTopic({chat_id:e},t)}unpinAllGeneralForumTopicMessages(e,t){return this.raw.unpinAllGeneralForumTopicMessages({chat_id:e},t)}answerCallbackQuery(e,t,r){return this.raw.answerCallbackQuery({callback_query_id:e,...t},r)}setMyName(e,t,r){return this.raw.setMyName({name:e,...t},r)}getMyName(e,t){return this.raw.getMyName(null!==e&&void 0!==e?e:{},t)}setMyCommands(e,t,r){return this.raw.setMyCommands({commands:e,...t},r)}deleteMyCommands(e,t){return this.raw.deleteMyCommands({...e},t)}getMyCommands(e,t){return this.raw.getMyCommands({...e},t)}setMyDescription(e,t,r){return this.raw.setMyDescription({description:e,...t},r)}getMyDescription(e,t){return this.raw.getMyDescription({...e},t)}setMyShortDescription(e,t,r){return this.raw.setMyShortDescription({short_description:e,...t},r)}getMyShortDescription(e,t){return this.raw.getMyShortDescription({...e},t)}setChatMenuButton(e,t){return this.raw.setChatMenuButton({...e},t)}getChatMenuButton(e,t){return this.raw.getChatMenuButton({...e},t)}setMyDefaultAdministratorRights(e,t){return this.raw.setMyDefaultAdministratorRights({...e},t)}getMyDefaultAdministratorRights(e,t){return this.raw.getMyDefaultAdministratorRights({...e},t)}editMessageText(e,t,r,n,i){return this.raw.editMessageText({chat_id:e,message_id:t,text:r,...n},i)}editMessageTextInline(e,t,r,n){return this.raw.editMessageText({inline_message_id:e,text:t,...r},n)}editMessageCaption(e,t,r,n){return this.raw.editMessageCaption({chat_id:e,message_id:t,...r},n)}editMessageCaptionInline(e,t,r){return this.raw.editMessageCaption({inline_message_id:e,...t},r)}editMessageMedia(e,t,r,n,i){return this.raw.editMessageMedia({chat_id:e,message_id:t,media:r,...n},i)}editMessageMediaInline(e,t,r,n){return this.raw.editMessageMedia({inline_message_id:e,media:t,...r},n)}editMessageReplyMarkup(e,t,r,n){return this.raw.editMessageReplyMarkup({chat_id:e,message_id:t,...r},n)}editMessageReplyMarkupInline(e,t,r){return this.raw.editMessageReplyMarkup({inline_message_id:e,...t},r)}stopPoll(e,t,r,n){return this.raw.stopPoll({chat_id:e,message_id:t,...r},n)}deleteMessage(e,t,r){return this.raw.deleteMessage({chat_id:e,message_id:t},r)}deleteMessages(e,t,r){return this.raw.deleteMessages({chat_id:e,message_ids:t},r)}sendSticker(e,t,r,n){return this.raw.sendSticker({chat_id:e,sticker:t,...r},n)}getStickerSet(e,t){return this.raw.getStickerSet({name:e},t)}getCustomEmojiStickers(e,t){return this.raw.getCustomEmojiStickers({custom_emoji_ids:e},t)}uploadStickerFile(e,t,r,n){return this.raw.uploadStickerFile({user_id:e,sticker_format:t,sticker:r},n)}createNewStickerSet(e,t,r,n,i,o){return this.raw.createNewStickerSet({user_id:e,name:t,title:r,stickers:n,...i},o)}addStickerToSet(e,t,r,n){return this.raw.addStickerToSet({user_id:e,name:t,sticker:r},n)}setStickerPositionInSet(e,t,r){return this.raw.setStickerPositionInSet({sticker:e,position:t},r)}deleteStickerFromSet(e,t){return this.raw.deleteStickerFromSet({sticker:e},t)}replaceStickerInSet(e,t,r,n,i){return this.raw.replaceStickerInSet({user_id:e,name:t,old_sticker:r,sticker:n},i)}setStickerEmojiList(e,t,r){return this.raw.setStickerEmojiList({sticker:e,emoji_list:t},r)}setStickerKeywords(e,t,r){return this.raw.setStickerKeywords({sticker:e,keywords:t},r)}setStickerMaskPosition(e,t,r){return this.raw.setStickerMaskPosition({sticker:e,mask_position:t},r)}setStickerSetTitle(e,t,r){return this.raw.setStickerSetTitle({name:e,title:t},r)}deleteStickerSet(e,t){return this.raw.deleteStickerSet({name:e},t)}setStickerSetThumbnail(e,t,r,n,i){return this.raw.setStickerSetThumbnail({name:e,user_id:t,thumbnail:r,format:n},i)}setCustomEmojiStickerSetThumbnail(e,t,r){return this.raw.setCustomEmojiStickerSetThumbnail({name:e,custom_emoji_id:t},r)}answerInlineQuery(e,t,r,n){return this.raw.answerInlineQuery({inline_query_id:e,results:t,...r},n)}answerWebAppQuery(e,t,r){return this.raw.answerWebAppQuery({web_app_query_id:e,result:t},r)}sendInvoice(e,t,r,n,i,o,s,a){return this.raw.sendInvoice({chat_id:e,title:t,description:r,payload:n,currency:i,prices:o,...s},a)}createInvoiceLink(e,t,r,n,i,o,s,a){return this.raw.createInvoiceLink({title:e,description:t,payload:r,provider_token:n,currency:i,prices:o,...s},a)}answerShippingQuery(e,t,r,n){return this.raw.answerShippingQuery({shipping_query_id:e,ok:t,...r},n)}answerPreCheckoutQuery(e,t,r,n){return this.raw.answerPreCheckoutQuery({pre_checkout_query_id:e,ok:t,...r},n)}getStarTransactions(e,t){return this.raw.getStarTransactions({...e},t)}refundStarPayment(e,t,r){return this.raw.refundStarPayment({user_id:e,telegram_payment_charge_id:t},r)}setPassportDataErrors(e,t,r){return this.raw.setPassportDataErrors({user_id:e,errors:t},r)}sendGame(e,t,r,n){return this.raw.sendGame({chat_id:e,game_short_name:t,...r},n)}setGameScore(e,t,r,n,i,o){return this.raw.setGameScore({chat_id:e,message_id:t,user_id:r,score:n,...i},o)}setGameScoreInline(e,t,r,n,i){return this.raw.setGameScore({inline_message_id:e,user_id:t,score:r,...n},i)}getGameHighScores(e,t,r,n){return this.raw.getGameHighScores({chat_id:e,message_id:t,user_id:r},n)}getGameHighScoresInline(e,t,r){return this.raw.getGameHighScores({inline_message_id:e,user_id:t},r)}}const Je=_e("grammy:bot"),$e=_e("grammy:warn"),Ke=_e("grammy:error"),Ye=["message","edited_message","channel_post","edited_channel_post","business_connection","business_message","edited_business_message","deleted_business_messages","inline_query","chosen_inline_result","callback_query","shipping_query","pre_checkout_query","poll","poll_answer","my_chat_member","chat_join_request","chat_boost","removed_chat_boost"];class Xe extends R{constructor(e,t){var r;if(super(),(0,n.A)(this,"token",void 0),(0,n.A)(this,"pollingRunning",void 0),(0,n.A)(this,"pollingAbortController",void 0),(0,n.A)(this,"lastTriedUpdateId",void 0),(0,n.A)(this,"api",void 0),(0,n.A)(this,"me",void 0),(0,n.A)(this,"mePromise",void 0),(0,n.A)(this,"clientConfig",void 0),(0,n.A)(this,"ContextConstructor",void 0),(0,n.A)(this,"observedUpdateTypes",void 0),(0,n.A)(this,"errorHandler",void 0),this.token=e,this.pollingRunning=!1,this.lastTriedUpdateId=0,this.observedUpdateTypes=new Set,this.errorHandler=async e=>{var t;throw console.error("Error in middleware while handling update",null===(t=e.ctx)||void 0===t||null===(t=t.update)||void 0===t?void 0:t.update_id,e.error),console.error("No error handler was set!"),console.error("Set your own error handler with `bot.catch = ...`"),this.pollingRunning&&(console.error("Stopping bot"),await this.stop()),e},!e)throw new Error("Empty token!");this.me=null===t||void 0===t?void 0:t.botInfo,this.clientConfig=null===t||void 0===t?void 0:t.client,this.ContextConstructor=null!==(r=null===t||void 0===t?void 0:t.ContextConstructor)&&void 0!==r?r:k,this.api=new He(e,this.clientConfig)}set botInfo(e){this.me=e}get botInfo(){if(void 0===this.me)throw new Error("Bot information unavailable! Make sure to call `await bot.init()` before accessing `bot.botInfo`!");return this.me}on(e){for(const[i]of s(e).flatMap(a))this.observedUpdateTypes.add(i);for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return super.on(e,...r)}reaction(e){this.observedUpdateTypes.add("message_reaction");for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return super.reaction(e,...r)}isInited(){return void 0!==this.me}async init(e){if(!this.isInited()){var t;let r;Je("Initializing bot"),null!==(t=this.mePromise)&&void 0!==t||(this.mePromise=Ze((()=>this.api.getMe(e)),e));try{r=await this.mePromise}finally{this.mePromise=void 0}void 0===this.me?this.me=r:Je("Bot info was set by now, will not overwrite")}Je("I am ".concat(this.me.username,"!"))}async handleUpdates(e){for(const r of e){this.lastTriedUpdateId=r.update_id;try{await this.handleUpdate(r)}catch(t){if(!(t instanceof P))throw console.error("FATAL: grammY unable to handle:",t),t;await this.errorHandler(t)}}}async handleUpdate(e,t){if(void 0===this.me)throw new Error("Bot not initialized! Either call `await bot.init()`, or directly set the `botInfo` option in the `Bot` constructor to specify a known bot info object.");Je("Processing update ".concat(e.update_id));const r=new He(this.token,this.clientConfig,t),n=this.api.config.installedTransformers();n.length>0&&r.config.use(...n);const i=new this.ContextConstructor(e,r,this.me);try{await F(this.middleware(),i)}catch(o){throw Ke("Error in middleware for update ".concat(e.update_id)),new P(o,i)}}async start(e){const t=[];var r;this.isInited()||t.push(this.init(null===(r=this.pollingAbortController)||void 0===r?void 0:r.signal));if(this.pollingRunning)return await Promise.all(t),void Je("Simple long polling already running!");this.pollingRunning=!0,this.pollingAbortController=new AbortController;try{var n,i;t.push(Ze((async()=>{var t;await this.api.deleteWebhook({drop_pending_updates:null===e||void 0===e?void 0:e.drop_pending_updates},null===(t=this.pollingAbortController)||void 0===t?void 0:t.signal)}),null===(n=this.pollingAbortController)||void 0===n?void 0:n.signal)),await Promise.all(t),await(null===e||void 0===e||null===(i=e.onStart)||void 0===i?void 0:i.call(e,this.botInfo))}catch(o){throw this.pollingRunning=!1,this.pollingAbortController=void 0,o}this.pollingRunning&&(!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ye;const r=Array.from(e).filter((e=>!t.includes(e)));r.length>0&&$e("You registered listeners for the following update types, but you did not specify them in `allowed_updates` so they may not be received: ".concat(r.map((e=>"'".concat(e,"'"))).join(", ")))}(this.observedUpdateTypes,null===e||void 0===e?void 0:e.allowed_updates),this.use=tt,Je("Starting simple long polling"),await this.loop(e),Je("Middleware is done running"))}async stop(){if(this.pollingRunning){var e;Je("Stopping bot, saving update offset"),this.pollingRunning=!1,null===(e=this.pollingAbortController)||void 0===e||e.abort();const t=this.lastTriedUpdateId+1;await this.api.getUpdates({offset:t,limit:1}).finally((()=>this.pollingAbortController=void 0))}else Je("Bot is not running!")}catch(e){this.errorHandler=e}async loop(e){var t,r;const n=null===e||void 0===e?void 0:e.limit,i=null!==(t=null===e||void 0===e?void 0:e.timeout)&&void 0!==t?t:30;let o=null!==(r=null===e||void 0===e?void 0:e.allowed_updates)&&void 0!==r?r:[];for(;this.pollingRunning;){const e=await this.fetchUpdates({limit:n,timeout:i,allowed_updates:o});if(void 0===e)break;await this.handleUpdates(e),o=void 0}}async fetchUpdates(e){let{limit:t,timeout:r,allowed_updates:n}=e;const i=this.lastTriedUpdateId+1;let o;do{try{var s;o=await this.api.getUpdates({offset:i,limit:t,timeout:r,allowed_updates:n},null===(s=this.pollingAbortController)||void 0===s?void 0:s.signal)}catch(a){await this.handlePollingError(a)}}while(void 0===o&&this.pollingRunning);return o}async handlePollingError(e){if(!this.pollingRunning)return void Je("Pending getUpdates request cancelled");let t=3;if(e instanceof we){if(Ke(e.message),401===e.error_code||409===e.error_code)throw e;var r;429===e.error_code&&(Ke("Bot API server is closing."),t=null!==(r=e.parameters.retry_after)&&void 0!==r?r:t)}else Ke(e);Ke("Call to getUpdates failed, retrying in ".concat(t," seconds ...")),await et(t)}}async function Ze(e,t){let r=50;async function n(e){let n=!1,i="rethrow";if(e instanceof Ce)n=!0,i="retry";else if(e instanceof we)if(e.error_code>=500)n=!0,i="retry";else if(429===e.error_code){const o=e.parameters.retry_after;"number"===typeof o?(await et(o,t),r=50):n=!0,i="retry"}if(n){50!==r&&await et(r,t);const e=12e5;r=Math.min(e,2*r)}return i}let i={ok:!1};for(;!i.ok;)try{i={ok:!0,value:await e()}}catch(o){Ke(o);switch(await n(o)){case"retry":continue;case"rethrow":throw o}}return i.value}async function et(e,t){let r,n;function i(){var e;null===(e=n)||void 0===e||e(new Error("Aborted delay")),void 0!==r&&clearTimeout(r)}try{await new Promise(((o,s)=>{n=s,null!==t&&void 0!==t&&t.aborted?i():(null===t||void 0===t||t.addEventListener("abort",i),r=setTimeout(o,1e3*e))}))}finally{null===t||void 0===t||t.removeEventListener("abort",i)}}function tt(){throw new Error("It looks like you are registering more listeners on your bot from within other listeners! This means that every time your bot handles a message like this one, new listeners will be added. This list grows until your machine crashes, so grammY throws this error to tell you that you should probably do things a bit differently. If you're unsure how to resolve this problem, you can ask in the group chat: https://telegram.me/grammyjs\n\nOn the other hand, if you actually know what you're doing and you do need to install further middleware while your bot is running, consider installing a composer instance on your bot, and in turn augment the composer after the fact. This way, you can circumvent this protection against memory leaks.")}const rt=[...Ye,"chat_member","message_reaction","message_reaction_count"],nt={DEFAULT_UPDATE_TYPES:Ye,ALL_UPDATE_TYPES:rt,ALL_CHAT_PERMISSIONS:{is_anonymous:!0,can_manage_chat:!0,can_delete_messages:!0,can_manage_video_chats:!0,can_restrict_members:!0,can_promote_members:!0,can_change_info:!0,can_invite_users:!0,can_post_stories:!0,can_edit_stories:!0,can_delete_stories:!0,can_post_messages:!0,can_edit_messages:!0,can_pin_messages:!0,can_manage_topics:!0}};Object.freeze(nt);_e("grammy:session");const it="X-Telegram-Bot-Api-Secret-Token",ot=it.toLowerCase(),st="secret token is wrong",at=()=>new Response(null,{status:200}),ct=e=>new Response(e,{status:200,headers:{"Content-Type":"application/json"}}),lt=()=>new Response('"unauthorized"',{status:401,statusText:st}),ut=(e,t)=>{const r=e.headers[ot];return{update:new Promise(((t,r)=>{const n=[];e.on("data",(e=>n.push(e))).once("end",(()=>{const e=Buffer.concat(n).toString("utf-8");t(JSON.parse(e))})).once("error",r)})),header:Array.isArray(r)?r[0]:r,end:()=>t.end(),respond:e=>t.writeHead(200,{"Content-Type":"application/json"}).end(e),unauthorized:()=>t.writeHead(401).end(st)}},dt={"aws-lambda":(e,t,r)=>{var n;return{update:JSON.parse(null!==(n=e.body)&&void 0!==n?n:"{}"),header:e.headers[it],end:()=>r(null,{statusCode:200}),respond:e=>r(null,{statusCode:200,headers:{"Content-Type":"application/json"},body:e}),unauthorized:()=>r(null,{statusCode:401})}},"aws-lambda-async":(e,t)=>{var r;let n;return{update:JSON.parse(null!==(r=e.body)&&void 0!==r?r:"{}"),header:e.headers[it],end:()=>n({statusCode:200}),respond:e=>n({statusCode:200,headers:{"Content-Type":"application/json"},body:e}),unauthorized:()=>n({statusCode:401}),handlerReturn:new Promise((e=>{n=e}))}},azure:(e,t)=>{var r;return{update:Promise.resolve(e.body),header:null===(r=t.res)||void 0===r||null===(r=r.headers)||void 0===r?void 0:r[it],end:()=>t.res={status:200,body:""},respond:e=>{var r,n,i,o;null===(r=t.res)||void 0===r||null===(n=r.set)||void 0===n||n.call(r,"Content-Type","application/json"),null===(i=t.res)||void 0===i||null===(o=i.send)||void 0===o||o.call(i,e)},unauthorized:()=>{var e,r;null===(e=t.res)||void 0===e||null===(r=e.send)||void 0===r||r.call(e,401,st)}}},bun:e=>{let t;return{update:e.json(),header:e.headers.get(it)||void 0,end:()=>{t(at())},respond:e=>{t(ct(e))},unauthorized:()=>{t(lt())}}},cloudflare:e=>{let t;return e.respondWith(new Promise((e=>{t=e}))),{update:e.request.json(),header:e.request.headers.get(it)||void 0,end:()=>{t(at())},respond:e=>{t(ct(e))},unauthorized:()=>{t(lt())}}},"cloudflare-mod":e=>{let t;return{update:e.json(),header:e.headers.get(it)||void 0,end:()=>{t(at())},respond:e=>{t(ct(e))},unauthorized:()=>{t(lt())},handlerReturn:new Promise((e=>{t=e}))}},express:(e,t)=>({update:Promise.resolve(e.body),header:e.header(it),end:()=>t.end(),respond:e=>{t.set("Content-Type","application/json"),t.send(e)},unauthorized:()=>{t.status(401).send(st)}}),fastify:(e,t)=>({update:Promise.resolve(e.body),header:e.headers[ot],end:()=>t.status(200).send(),respond:e=>t.headers({"Content-Type":"application/json"}).send(e),unauthorized:()=>t.code(401).send(st)}),hono:e=>{let t;return{update:e.req.json(),header:e.req.header(it),end:()=>{t(e.body(null))},respond:r=>{t(e.json(r))},unauthorized:()=>{e.status(401),t(e.body(null))},handlerReturn:new Promise((e=>{t=e}))}},http:ut,https:ut,koa:e=>({update:Promise.resolve(e.request.body),header:e.get(it)||void 0,end:()=>{e.body=""},respond:t=>{e.set("Content-Type","application/json"),e.response.body=t},unauthorized:()=>{e.status=401}}),"next-js":(e,t)=>({update:Promise.resolve(e.body),header:e.headers[ot],end:()=>t.end(),respond:e=>t.status(200).json(e),unauthorized:()=>t.status(401).send(st)}),nhttp:e=>({update:Promise.resolve(e.body),header:e.headers.get(it)||void 0,end:()=>e.response.sendStatus(200),respond:t=>e.response.status(200).send(t),unauthorized:()=>e.response.status(401).send(st)}),oak:e=>({update:e.request.body.json(),header:e.request.headers.get(it)||void 0,end:()=>{e.response.status=200},respond:t=>{e.response.type="json",e.response.body=t},unauthorized:()=>{e.response.status=401}}),serveHttp:e=>({update:e.request.json(),header:e.request.headers.get(it)||void 0,end:()=>e.respondWith(at()),respond:t=>e.respondWith(ct(t)),unauthorized:()=>e.respondWith(lt())}),"std/http":e=>{let t;return{update:e.json(),header:e.headers.get(it)||void 0,end:()=>{t&&t(at())},respond:e=>{t&&t(ct(e))},unauthorized:()=>{t&&t(lt())},handlerReturn:new Promise((e=>{t=e}))}},sveltekit:e=>{let t,{request:r}=e;return{update:Promise.resolve(r.json()),header:r.headers.get(it)||void 0,end:()=>{t&&t(at())},respond:e=>{t&&t(ct(e))},unauthorized:()=>{t&&t(lt())},handlerReturn:new Promise((e=>{t=e}))}},worktop:(e,t)=>{var r;return{update:Promise.resolve(e.json()),header:null!==(r=e.headers.get(it))&&void 0!==r?r:void 0,end:()=>t.end(null),respond:e=>t.send(200,e),unauthorized:()=>t.send(401,st)}}};_e("grammy:error")}}]);