"use strict";(self.webpackChunkemojifi=self.webpackChunkemojifi||[]).push([[137],{1940:(e,t,n)=>{n.d(t,{Kc:()=>o,MF:()=>r,nn:()=>i});var s=n(4451);const r=(0,s.j)((()=>n.e(465).then(n.bind(n,465))),(e=>e.ImageFast)),i=(0,s.j)((()=>n.e(606).then(n.bind(n,9606))),(e=>e.ImageSkeleton)),o=(0,s.j)((()=>n.e(613).then(n.bind(n,2613))),(e=>e.ImageSkeletonShow))},4137:(e,t,n)=>{n.r(t),n.d(t,{AlbumPage:()=>v});var s=n(9950),r=n(6455),i=n(3247),o=n(1389),a=n(4418),l=n(5890),c=n(5439),d=n(1374),u=n(1317),h=n(194),g=n(8671),w=n(1878),x=n(5236),p=n(712),m=n(7385),j=n(327),f=n(6256),b=n(1940),k=n(3564),y=n(8412),C=n(4414);let _=window.innerWidth>500?500:window.innerWidth;window.innerHeight;const v=()=>{const e=(0,k.Zp)(),{configs:t,user:n}=(0,s.useContext)(x.rf),{setConfigs:v,setUser:S}=(0,s.useContext)(x.D8),[A,I]=(0,s.useState)(!0),[W,z]=(0,s.useState)(!1),[E,T]=(0,s.useState)(!0),[F,K]=(0,s.useState)(0),[P,B]=(0,s.useState)([]),[H,R]=(0,s.useState)("All");(0,s.useEffect)((()=>{window.scrollTo(0,0),(async()=>{if(!t){const e=await(0,p.Y_)();v(e)}await D({isFirst:!1,_textKey:"",_cursor:0})})(),V()}),[]);const V=async()=>{var e;const t=null===(e=window.Telegram)||void 0===e?void 0:e.WebApp;if(t&&!n){t.ready();const e=t.initDataUnsafe.user;if(e){let t={id:e.id,username:"".concat(e.last_name," ").concat(e.first_name),coins:0};const n=await(0,p.wz)(t.id);n?t={...n,username:"".concat(e.last_name," ").concat(e.first_name)}:await(0,p.kg)(t),S(t)}}},D=async e=>{let{isFirst:s,_textKey:r,_cursor:i}=e;if(!W&&P.length<=20){z(!0);let e=await(0,p.Zt)({id:n.id,cursor:i});e?(B([...P,...e]),K(i+50),i+50===t.limitSearch&&T(!1)):B([]),!A&&await(0,m.yy)(1e3),z(!1)}},L=(0,s.useCallback)((async()=>{const{scrollTop:e,scrollHeight:t,clientHeight:n}=document.documentElement;e+n>=t-.5&&await D({isFirst:!1,_textKey:"",_cursor:0})}),[P]);return(0,s.useEffect)((()=>(window.addEventListener("scroll",L),()=>window.removeEventListener("scroll",L))),[L]),(0,C.jsxs)(i.az,{children:[(0,C.jsxs)(r.mg,{children:[(0,C.jsx)("title",{children:"Album"}),(0,C.jsx)("meta",{name:"description",content:"Midjourney AI"})]}),(0,C.jsxs)(o.B,{h:"100vh",w:_,py:16,px:2,spacing:4,children:[(0,C.jsx)(o.B,{children:(0,C.jsx)(a.z,{pos:"fixed",zIndex:999,right:2,children:(0,C.jsxs)(l.W,{children:[(0,C.jsx)(c.I,{variant:"outline",borderRadius:"full",borderColor:"purple.400",borderWidth:1,as:d.$,rightIcon:(0,C.jsx)(j.gpS,{color:"white",size:18}),size:"sm",minW:20,_focus:{bg:"transparent"},_hover:{bg:"transparent"},_expanded:{bg:"transparent"},children:(0,C.jsx)(u.E,{color:"white",fontSize:14,fontWeight:"700",children:H})}),(0,C.jsx)(h.c,{backgroundColor:"gray.800",borderColor:"gray.800",color:"white",children:(0,C.jsxs)(g.i,{defaultValue:"All",type:"radio",onChange:e=>{R(e)},children:[(0,C.jsx)(w.k,{backgroundColor:"transparent",value:"All",children:"All"}),(0,C.jsx)(w.k,{backgroundColor:"transparent",value:"Photos",children:"Photos"}),(0,C.jsx)(w.k,{backgroundColor:"transparent",value:"Videos",children:"Videos"})]})})]})})}),(0,C.jsx)(o.B,{padding:0,pb:40,pt:6,onScroll:L,children:(0,C.jsx)(f.A,{columnsCount:2,gutter:"16px",children:P.map(((t,n)=>{const{uri:s}=t;return(0,C.jsx)(b.nn,{uri:s,onPress:()=>{e(y.W.ART_ARTISTIC,{state:{dataAI:t}})}},n)}))})})]})]})}}}]);