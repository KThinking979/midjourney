"use strict";(self.webpackChunkemojifi=self.webpackChunkemojifi||[]).push([[137],{1940:(e,t,n)=>{n.d(t,{Kc:()=>o,MF:()=>r,nn:()=>i});var s=n(4451);const r=(0,s.j)((()=>n.e(465).then(n.bind(n,465))),(e=>e.ImageFast)),i=(0,s.j)((()=>n.e(606).then(n.bind(n,9606))),(e=>e.ImageSkeleton)),o=(0,s.j)((()=>n.e(613).then(n.bind(n,2613))),(e=>e.ImageSkeletonShow))},4137:(e,t,n)=>{n.r(t),n.d(t,{AlbumPage:()=>_});var s=n(9950),r=n(6455),i=n(3247),o=n(1389),a=n(4418),l=n(5890),c=n(5439),d=n(1374),u=n(1317),h=n(194),m=n(8671),w=n(1878),g=n(5236),x=n(712),p=n(7385),f=n(327),j=n(6256),b=n(1940),y=n(3564),k=n(8412),C=n(4414);let S=window.innerWidth>500?500:window.innerWidth;window.innerHeight;const _=()=>{const e=(0,y.Zp)(),{configs:t,user:n}=(0,s.useContext)(g.rf),{setConfigs:_,setUser:v}=(0,s.useContext)(g.D8),[A,I]=(0,s.useState)(!0),[W,z]=(0,s.useState)(!1),[T,E]=(0,s.useState)(!0),[F,P]=(0,s.useState)(0),[R,K]=(0,s.useState)([]),[M,B]=(0,s.useState)("All");(0,s.useEffect)((()=>{window.scrollTo(0,0),(async()=>{if(!t){const e=await(0,x.Y_)();_(e)}await H({isFirst:!1,_textKey:"",_cursor:0})})(),D()}),[]);const D=async()=>{var e;const t=null===(e=window.Telegram)||void 0===e?void 0:e.WebApp;if(t&&!n){t.ready();const e=t.initDataUnsafe.user;if(e){let t={id:e.id,username:"".concat(e.last_name," ").concat(e.first_name),coins:0};const n=await(0,x.wz)(t.id);n?t={...n,username:"".concat(e.last_name," ").concat(e.first_name)}:await(0,x.kg)(t),v(t)}}},H=async e=>{let{isFirst:s,_textKey:r,_cursor:i}=e;if(!W&&R.length<=20){z(!0);let e=await(0,x.Zt)({id:n.id,cursor:i});e?(K([...R,...e]),P(i+50),i+50===t.limitSearch&&E(!1)):K([]),!A&&await(0,p.yy)(1e3),z(!1)}},L=(0,s.useCallback)((async()=>{const{scrollTop:e,scrollHeight:t,clientHeight:n}=document.documentElement;e+n>=t-.5&&await H({isFirst:!1,_textKey:"",_cursor:0})}),[R]);return(0,s.useEffect)((()=>(window.addEventListener("scroll",L),()=>window.removeEventListener("scroll",L))),[L]),(0,C.jsxs)(i.az,{children:[(0,C.jsxs)(r.mg,{children:[(0,C.jsx)("title",{children:"Album"}),(0,C.jsx)("meta",{name:"description",content:"Midjourney AI"})]}),(0,C.jsxs)(o.B,{h:"100vh",w:S,py:16,px:2,spacing:4,children:[(0,C.jsx)(o.B,{children:(0,C.jsx)(a.z,{pos:"fixed",zIndex:999,right:2,children:(0,C.jsxs)(l.W,{children:[(0,C.jsx)(c.I,{variant:"outline",borderRadius:"full",borderColor:"purple.400",borderWidth:1,as:d.$,rightIcon:(0,C.jsx)(f.gpS,{color:"white",size:18}),size:"sm",minW:20,_focus:{bg:"transparent"},_hover:{bg:"transparent"},_expanded:{bg:"transparent"},children:(0,C.jsx)(u.E,{color:"white",fontSize:14,fontWeight:"700",children:M})}),(0,C.jsx)(h.c,{backgroundColor:"gray.800",borderColor:"gray.800",color:"white",children:(0,C.jsxs)(m.i,{defaultValue:"All",type:"radio",onChange:e=>{B(e)},children:[(0,C.jsx)(w.k,{backgroundColor:"transparent",value:"All",children:"All"}),(0,C.jsx)(w.k,{backgroundColor:"transparent",value:"Photos",children:"Photos"}),(0,C.jsx)(w.k,{backgroundColor:"transparent",value:"Videos",children:"Videos"})]})})]})})}),(0,C.jsx)(o.B,{padding:0,pb:40,pt:6,onScroll:L,children:(0,C.jsx)(j.A,{columnsCount:2,gutter:"16px",children:R.map(((t,n)=>{const{uri:s}=t;return(0,C.jsx)(b.nn,{uri:s,onPress:()=>{e(k.W.ART_ARTISTIC,{state:{dataAI:t}})}},n)}))})})]})]})}},7385:(e,t,n)=>{n.d(t,{RZ:()=>r,Sk:()=>i,yy:()=>s});const s=e=>new Promise((t=>setTimeout(t,e))),r=e=>{let{min:t,max:n}=e;return Math.floor(Math.random()*(n-t+1))+t},i=e=>new Promise(((t,n)=>{const s=new FileReader;s.onloadend=()=>t(s.result),s.readAsDataURL(e)}))}}]);