"use strict";(self.webpackChunkemojifi=self.webpackChunkemojifi||[]).push([[598],{9598:(e,o,t)=>{t.r(o),t.d(o,{PaymentPage:()=>I});var s=t(9950),n=t(6455),i=t(2099),c=t(3247),r=t(1389),l=t(1317),a=t(4418),d=t(393),h=t(6086),x=t(6569),u=t(1374),j=t(5236),p=t(712),f=t(2096),w=t(2875),b=t(2691),g=t(2119),m=t(4456),y=t(3564),C=t(3246),z=t(8412),S=t(4414);let k=window.innerWidth>500?500:window.innerWidth;window.innerHeight;const I=()=>{const e=(0,y.Zp)(),{user:o,configs:I}=(0,s.useContext)(j.rf),{setUser:E}=(0,s.useContext)(j.D8),P=(0,i.d)(),[B,F]=(0,s.useState)(!1),[W,A]=(0,s.useState)(I&&I.package?I.package[0]:m.Hy[0]),[v,N]=(0,s.useState)(I&&I.package?I.package:m.Hy);(0,s.useEffect)((()=>{H()}),[]);const H=async()=>{window.scrollTo(0,0)};return(0,S.jsxs)(c.az,{children:[(0,S.jsxs)(n.mg,{children:[(0,S.jsx)("title",{children:"Payment"}),(0,S.jsx)("meta",{name:"description",content:"Midjourney AI"})]}),(0,S.jsx)(r.B,{h:"100vh",w:k,py:20,px:2,children:(0,S.jsxs)(r.B,{spacing:4,pb:40,children:[(0,S.jsxs)(r.B,{justifyContent:"center",alignItems:"center",children:[(0,S.jsx)(l.E,{color:"white",fontSize:18,fontWeight:"bold",children:"Purchase Coins"}),(0,S.jsx)(l.E,{color:"white",fontSize:14,children:"Please choose one of the following costs"})]}),v.map((e=>{const{id:o,coins:s,cost:n,disCost:i,description1:c}=e,u=s/(I&&I.feeBasic?I.feeBasic:.2),j=o===W.id;return(0,S.jsx)(r.B,{spacing:4,borderRadius:8,borderColor:j?"blue.400":"gray.500",borderWidth:j?2:1,px:2,py:4,onClick:()=>{A(e)},children:(0,S.jsxs)(a.z,{spacing:2,justifyContent:"space-between",children:[(0,S.jsxs)(r.B,{spacing:2,children:[(0,S.jsxs)(a.z,{children:[(0,S.jsx)(d.I,{color:"blue.400",as:f.dA7,boxSize:6}),(0,S.jsx)(l.E,{color:"white",fontSize:14,children:(new Intl.NumberFormat).format(s)}),(0,S.jsx)(h.o,{children:(0,S.jsx)(x._,{boxSize:"18px",src:t(2975),alt:"card"})}),(0,S.jsx)(l.E,{color:"white",fontSize:14,children:"Coins"})]}),(0,S.jsxs)(a.z,{children:[(0,S.jsx)(d.I,{color:"blue.400",as:f.dA7,boxSize:6}),(0,S.jsx)(l.E,{color:"white",fontSize:14,children:"".concat((new Intl.NumberFormat).format(u)," ").concat(c)})]}),i&&(0,S.jsxs)(a.z,{children:[(0,S.jsx)(d.I,{color:"blue.400",as:f.dA7,boxSize:6}),(0,S.jsx)(l.E,{color:"red.400",fontSize:14,children:"Save ".concat(((i-n)/i*100).toFixed(2),"%")})]})]}),(0,S.jsxs)(r.B,{alignItems:"center",justifyContent:"center",spacing:"2px",children:[(0,S.jsx)(l.E,{color:"white",fontSize:18,fontWeight:"700",children:"$".concat(n)}),i&&(0,S.jsx)(l.E,{as:"s",color:"gray",fontSize:17,children:"$".concat(i)})]})]})},o)}))]})}),(0,S.jsx)(r.B,{spacing:4,flex:1,justifyContent:"center",pos:"fixed",bottom:0,w:"full",zIndex:999,backgroundColor:"black",children:(0,S.jsx)(u.$,{maxWidth:"500px",py:4,mx:2,my:4,colorScheme:"green",borderRadius:"full",onClick:async()=>{try{F(!0);const t=new b.cC(I.tokenApp),s=W.title,n=W.title,i="{}",c="XTR",r=[{amount:W.star,label:W.title}],l=await t.api.createInvoiceLink(s,n,i,"",c,r);let a=W.coins;t.on("pre_checkout_query",(e=>e.answerPreCheckoutQuery(!0).catch((()=>{console.log("answerPreCheckoutQuery failed")})))),g.A.openInvoice(l,(async t=>{if("paid"===t){const t=parseFloat(o.coins+W.coins);await(0,p.bF)({id:o.id,coins:t,transactionId:a}),E({...o,coins:t}),F(!1),P({title:"Success Purchase",status:"success",position:"top",isClosable:!0}),e(z.W.ACCOUNT)}else F(!1),P({title:"Fail Purchase",status:"error",position:"top",isClosable:!0})})),t.start()}catch(t){console.log("Error ",t),F(!1),P({title:"Fail Purchase",status:"error",position:"top",isClosable:!0})}},children:(0,S.jsxs)(a.z,{children:[(0,S.jsx)(l.E,{color:"white",fontSize:16,fontWeight:"700",children:"Payment"}),(0,S.jsx)(l.E,{color:"white",fontSize:16,children:(new Intl.NumberFormat).format(W.star)}),(0,S.jsx)(d.I,{color:"yellow.400",as:w.gt3,boxSize:5})]})})}),(0,S.jsx)(C.aj,{isOpen:B})]})}}}]);