"use strict";(self.webpackChunkemojifi=self.webpackChunkemojifi||[]).push([[216],{2216:(e,t,o)=>{o.r(t),o.d(t,{PaymentPage:()=>k});var s=o(9950),n=o(6455),i=o(2099),c=o(3247),a=o(7981),r=o(3731),l=o(4418),d=o(393),h=o(6086),x=o(6569),p=o(1374),u=o(5236),f=o(712),j=o(2096),b=o(2875),m=o(2691),w=o(2119),g=o(4456),y=o(3564);const z=(0,o(4451).j)((()=>Promise.all([o.e(617),o.e(825)]).then(o.bind(o,825))),(e=>e.ModalLoading));var S=o(4414);let C=window.innerWidth>500?500:window.innerWidth;window.innerHeight;const k=()=>{const e=(0,y.Zp)(),{user:t,configs:k}=(0,s.useContext)(u.rf),{setUser:E}=(0,s.useContext)(u.D8),I=(0,i.d)(),[P,v]=(0,s.useState)(!1),[B,F]=(0,s.useState)(k&&k.package?k.package[0]:g.Hy[0]),[W,A]=(0,s.useState)(k&&k.package?k.package:g.Hy);(0,s.useEffect)((()=>{H(),(async()=>{var e;const o=null===(e=window.Telegram)||void 0===e?void 0:e.WebApp;if(o&&!t){o.ready();const e=o.initDataUnsafe.user;if(e){let t={id:e.id,username:"".concat(e.last_name," ").concat(e.first_name),coins:0};const o=await(0,f.wz)(t.id);o?t={...t,coins:o.coins}:await(0,f.kg)(t),E(t)}}})()}),[]);const H=async()=>{};return(0,S.jsxs)(c.az,{children:[(0,S.jsxs)(n.mg,{children:[(0,S.jsx)("title",{children:"Payment"}),(0,S.jsx)("meta",{name:"description",content:"Midjourney AI"})]}),(0,S.jsx)(a.B,{h:"100vh",w:C,py:8,px:2,children:(0,S.jsxs)(a.B,{spacing:4,pb:40,children:[(0,S.jsxs)(a.B,{justifyContent:"center",alignItems:"center",children:[(0,S.jsx)(r.E,{color:"white",fontSize:18,fontWeight:"bold",children:"Purchase Coins"}),(0,S.jsx)(r.E,{color:"white",fontSize:14,children:"Please choose one of the following costs"})]}),W.map((e=>{const{id:t,coins:s,cost:n,disCost:i,description1:c}=e,p=s/(k&&k.feeBasic?k.feeBasic:.2),u=t===B.id;return(0,S.jsx)(a.B,{spacing:4,borderRadius:8,borderColor:u?"blue.400":"gray.500",borderWidth:u?2:1,px:2,py:4,onClick:()=>{F(e)},children:(0,S.jsxs)(l.z,{spacing:2,justifyContent:"space-between",children:[(0,S.jsxs)(a.B,{spacing:2,children:[(0,S.jsxs)(l.z,{children:[(0,S.jsx)(d.I,{color:"blue.400",as:j.dA7,boxSize:6}),(0,S.jsx)(r.E,{color:"white",fontSize:14,children:(new Intl.NumberFormat).format(s)}),(0,S.jsx)(h.o,{children:(0,S.jsx)(x._,{boxSize:"18px",src:o(2975),alt:"card"})}),(0,S.jsx)(r.E,{color:"white",fontSize:14,children:"Coins"})]}),(0,S.jsxs)(l.z,{children:[(0,S.jsx)(d.I,{color:"blue.400",as:j.dA7,boxSize:6}),(0,S.jsx)(r.E,{color:"white",fontSize:14,children:"".concat((new Intl.NumberFormat).format(p)," ").concat(c)})]}),i&&(0,S.jsxs)(l.z,{children:[(0,S.jsx)(d.I,{color:"blue.400",as:j.dA7,boxSize:6}),(0,S.jsx)(r.E,{color:"red.400",fontSize:14,children:"Save ".concat(((i-n)/i*100).toFixed(2),"%")})]})]}),(0,S.jsxs)(a.B,{alignItems:"center",justifyContent:"center",spacing:"2px",children:[(0,S.jsx)(r.E,{color:"white",fontSize:18,fontWeight:"700",children:"$".concat(n)}),i&&(0,S.jsx)(r.E,{as:"s",color:"gray",fontSize:17,children:"$".concat(i)})]})]})},t)}))]})}),(0,S.jsx)(a.B,{spacing:4,flex:1,justifyContent:"center",pos:"fixed",bottom:0,w:"full",zIndex:999,backgroundColor:"black",children:(0,S.jsx)(p.$,{maxWidth:"500px",py:4,mx:2,my:4,colorScheme:"green",borderRadius:"full",onClick:async()=>{try{v(!0);const o=new m.cC(k.tokenApp),s=B.title,n=B.title,i="{}",c="XTR",a=[{amount:B.star,label:B.title}],r=await o.api.createInvoiceLink(s,n,i,"",c,a);w.A.openInvoice(r,(async o=>{if(console.log("status ",o),alert("status ".concat(o)),"paid"===o){const o=parseFloat(t.coins+B.coins);await(0,f.bF)({id:t.id,coins:o}),E({...t,coins:o}),v(!1),I({title:"Success Purchase",status:"success",position:"top",isClosable:!0}),e(-1)}else v(!1),I({title:"Fail Purchase",status:"error",position:"top",isClosable:!0})}))}catch(o){console.log("Error ",o),alert("Error ".concat(o)),v(!1),I({title:"Fail Purchase",status:"error",position:"top",isClosable:!0})}},children:(0,S.jsxs)(l.z,{children:[(0,S.jsx)(r.E,{color:"white",fontSize:16,fontWeight:"700",children:"Payment"}),(0,S.jsx)(r.E,{color:"white",fontSize:16,children:(new Intl.NumberFormat).format(B.star)}),(0,S.jsx)(d.I,{color:"yellow.400",as:b.gt3,boxSize:5})]})})}),(0,S.jsx)(z,{isOpen:P})]})}},2975:(e,t,o)=>{e.exports=o.p+"static/media/coin.84cf06a861a4cfb9ad42.png"}}]);